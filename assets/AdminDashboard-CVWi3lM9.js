import{m,_ as h,r as i,o as p,c as _,b as t,a as s,e as n,f as c,w as b,g as k,h as E,F as T}from"./index-D73JBGpL.js";import{t as f}from"./toastMessage-BqMOhC6u.js";import{C as $}from"./collapse-1cWgUiF5.js";import{T as R}from"./ToastModal-DgR8YuDj.js";import"./selector-engine-DPs8hTdi.js";var V={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"hedy-api-path",BASE_URL:"/Eco-Coffee/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:x}=V,A={methods:{...m(f,["pushMessage"]),logOut(){const a=`${x}/logout`;this.axios.post(a).then(e=>{this.pushMessage({style:"success",title:"已登出",content:e.data.message}),document.cookie="myToken=;expires=;path=/",this.$router.push("/")}).catch(e=>{this.pushMessage({style:"danger",title:"登出狀態",content:e.response.data.message})})},openCollapse(){this.collapseA.show()}},mounted(){this.collapseA=new $(this.$refs.collapseA,{toggle:!1})}},y={class:"navbar navbar-expand-lg navbar-dark bg-primary sticky-top py-2"},C={class:"container-fluid"},M=t("i",{class:"bi bi-cup-hot ff-minor"},null,-1),S=t("span",{class:"ms-2 fw-bold ff-minor"},"Eco-Coffee",-1),L=t("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},[t("span",{class:"navbar-toggler-icon"})],-1),w={id:"navbarSupportedContent",ref:"collapseA",class:"collapse navbar-collapse"},D={class:"navbar-nav me-auto mb-2 mb-lg-0"};function I(a,e,v,g,u,r){const o=i("RouterLink"),l=i("router-link");return p(),_("div",null,[t("nav",y,[t("div",C,[s(o,{to:"/admin/products",class:"fs-4 navbar-brand align-items-center me-2"},{default:n(()=>[M,S]),_:1}),L,t("div",w,[t("div",D,[s(o,{to:"/admin/products",class:"nav-item nav-link"},{default:n(()=>[c("產品")]),_:1}),s(o,{to:"/admin/orders",class:"nav-item nav-link"},{default:n(()=>[c("訂單")]),_:1}),s(o,{to:"/admin/coupons",class:"nav-item nav-link"},{default:n(()=>[c("優惠券")]),_:1}),s(o,{to:"/admin/article",class:"nav-item nav-link"},{default:n(()=>[c("貼文")]),_:1}),s(l,{to:"/",class:"nav-item nav-link"},{default:n(()=>[c("前台頁面")]),_:1}),t("a",{href:"#",onClick:e[0]||(e[0]=b((...d)=>r.logOut&&r.logOut(...d),["prevent"])),class:"nav-item nav-link"},"登出")])],512)])])])}const N=h(A,[["render",I]]);var O={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"hedy-api-path",BASE_URL:"/Eco-Coffee/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:U}=O,B={data(){return{checkSuccess:!1}},components:{AdminNavbar:N,ToastModal:R},methods:{...m(f,["pushMessage"]),checkLogin(){const a=`${U}/api/user/check`;this.axios.post(a).then(e=>{this.pushMessage({style:"success",title:"登入成功",content:e.data.message}),this.checkSuccess=!0}).catch(e=>{this.pushMessage({style:"danger",title:"錯誤訊息",content:e.response.data.message}),this.$router.push("/login")})}},mounted(){const a=document.cookie.replace(/(?:(?:^|.*;\s*)myToken\s*=\s*([^;]*).*$)|^.*$/,"$1");this.axios.defaults.headers.common.Authorization=a,this.checkLogin()}};function P(a,e,v,g,u,r){const o=i("AdminNavbar"),l=i("ToastModal"),d=i("RouterView");return p(),_(T,null,[s(o),s(l),u.checkSuccess?(p(),k(d,{key:0})):E("",!0)],64)}const G=h(B,[["render",P]]);export{G as default};
