import{_ as x,m as L,r as n,o,c,a,b as t,F as m,j as b,e as l,t as r,f as _,h,w}from"./index-BPVuhT8G.js";import{S as T,c as S}from"./cartStore-BT11L4Al.js";import{F as C}from"./FooterLayout-DAXMv8Jd.js";var E={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"hedy-api-path",BASE_URL:"/Eco-Coffee/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:V,VITE_PATH:P}=E,I={data(){return{isLoading:!1,products:[],trackList:[],cart:{}}},computed:{filterProducts(){return this.products.filter(e=>this.trackList.includes(e.id))}},components:{FooterLayout:C},methods:{...L(S,["addToCart"]),getProducts(){this.isLoading=!0;const e=`${V}/api/${P}/products/all`;this.axios.get(e).then(i=>{this.products=i.data.products,this.isLoading=!1}).catch(i=>{this.isLoading=!1,alert(i.response.data.message)})},getTrack(){const e=localStorage.getItem("homeTrack");e&&(this.trackList=JSON.parse(e))},setTrack(e){if(this.trackList.includes(e)){const i=this.trackList.findIndex(u=>u===e);this.trackList.splice(i,1)}else this.trackList.push(e);T.fire({icon:"success",title:"己移除收藏清單",showConfirmButton:!1,timer:1500}),localStorage.setItem("homeTrack",JSON.stringify(this.trackList)),this.getTrack()}},mounted(){this.getProducts(),this.getTrack()}},R={class:"position-relative mb-6"},F={key:0},N={class:"container"},O={class:"row d-flex justify-content-center"},B=t("div",{class:"col-12 text-center text-dark mt-xl-7 mt-lg-7 mt-md-7","data-aos":"fade-down"},[t("div",{class:"h3 fw-bold mt-5 mb-2"}," 追蹤商品 ")],-1),U={class:"row row-cols-3 g-4 col-lg-12 col-md-10 mb-5 d-flex justify-content-center"},$={class:"card product-card shadow bg-white mb-sm-4 ms-md-4 m-sm-auto"},j=["src"],A={class:"card-body position-relative"},D={class:"row d-flex"},H={class:"col"},J={class:"left w-100"},M={class:"bg-secondary position-absolute fs-6 px-2 py-1 text-white category"},z={class:"col-3"},q={class:"right w-100 text-end"},G=["onClick"],K={key:0},Q=t("i",{class:"bi bi-heart-fill fs-4 text-danger"},null,-1),W=[Q],X={key:1},Y=t("i",{class:"bi bi-heart fs-4 text-danger"},null,-1),Z=[Y],tt={class:"card-title pt-2 fw-bold"},st={key:0,class:"h5"},et={key:1,class:"h6 text-dark"},ot={key:2,class:"h5 fw-bold"},ct=["onClick"],it=t("i",{class:"bi bi-cart-check"},null,-1),at={key:1,class:"text-center mb-7 mb-md-9 pt-7 pt-md-9"},rt=t("h2",{class:"text-dark mt-6"},"沒有追蹤商品，快去逛逛",-1),nt=t("p",{class:"text-primary my-4 mb-md-5"},"前往商品列表",-1);function dt(e,i,u,lt,p,d){const k=n("LoadingOverLay"),f=n("router-link"),g=n("RouterLink"),v=n("FooterLayout");return o(),c(m,null,[a(k,{active:p.isLoading,"z-index":1060,class:"text-center"},null,8,["active"]),t("section",R,[d.filterProducts.length>0?(o(),c("div",F,[t("div",N,[t("div",O,[B,t("div",U,[(o(!0),c(m,null,b(d.filterProducts,s=>(o(),c("div",{key:s.id,class:"col-12 col-xl-4 col-lg-5 d-flex justify-content-center"},[t("div",$,[a(f,{to:`/product/${s.id}`,class:"product-card-link"},{default:l(()=>[t("img",{src:s.imageUrl,class:"product-card-img"},null,8,j)]),_:2},1032,["to"]),t("div",A,[t("div",D,[t("div",H,[t("div",J,[t("div",M,r(s.category),1)])]),t("div",z,[t("div",q,[t("div",{onClick:y=>d.setTrack(s.id)},[p.trackList.includes(s.id)?(o(),c("span",K,W)):(o(),c("span",X,Z))],8,G)])])]),t("h5",tt,[a(f,{to:`/product/${s.id}`},{default:l(()=>[_(r(s.title),1)]),_:2},1032,["to"])]),t("td",null,[s.price?h("",!0):(o(),c("div",st,r(s.origin_price)+" 元 ",1)),s.price?(o(),c("del",et," 原價 "+r(s.origin_price)+" 元",1)):h("",!0),s.price?(o(),c("div",ot," 現在只要 "+r(s.price)+" 元 ",1)):h("",!0)]),t("button",{class:"btn btn-primary w-100",type:"button",onClick:w(y=>e.addToCart(s.id),["prevent"])},[it,_(" 加入購物車")],8,ct)])])]))),128))])])])])):(o(),c("div",at,[rt,nt,a(g,{to:"/products",class:"fs-5 btn btn-primary py-3 px-5"},{default:l(()=>[_(" 查看商品 ")]),_:1})]))]),a(v)],64)}const pt=x(I,[["render",dt]]);export{pt as default};
