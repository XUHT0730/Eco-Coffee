import{_ as f,m as b,r as n,o as r,c as d,a as l,b as s,e as g,w as y,F as w,i as x,t as o,h as v,s as k,f as L}from"./index-DeCydIJq.js";import{S as _}from"./sweetalert2.all-BF7AL5qx.js";import{t as E}from"./toastMessage-FEw6yhA3.js";var O={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"hedy-api-path",BASE_URL:"/Eco-Coffee/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:h,VITE_PATH:p}=O,V={data(){return{order:{user:{}},orderId:""}},methods:{...b(E,["pushMessage"]),getOrder(){const c=`${h}/api/${p}/order/${this.orderId}`;this.isLoading=!0,this.axios.get(c).then(a=>{this.order=a.data.order,this.isLoading=!1}).catch(a=>{this.isLoading=!1,this.pushMessage({style:"danger",title:"取得訂單失敗",content:a.response.data.message})})},payOrder(){const c=`${h}/api/${p}/pay/${this.orderId}`;this.isLoading=!0,this.axios.post(c).then(()=>{this.getOrder(),_.fire({title:"付款完成",icon:"success"}),this.isLoading=!1}).catch(()=>{this.isLoading=!1,_.fire({title:"付款失敗",icon:"warning"})})}},created(){this.orderId=this.$route.params.orderId,this.getOrder()}},I={class:"container my-5"},S={class:"row d-flex justify-content-center"},T={key:0,class:"col-md-6"},N=k('<h2 class="text-primary fw-bold">訂單完成</h2><div class="mt-4"><p class="h5"><span class="h5 me-1 text-primary fw-bold">付款已完成</span>感謝訂購</p><p class="ml-2">訂單完成預計 1 ~ 2 天出貨</p><div style="height:300px;background-size:cover;background-position:center;background-image:url(&#39;/src/assets/images/checkout.jpg&#39;);"></div></div>',2),C={key:1,class:"col-md-6"},M=s("h2",{class:"mb-5 text-primary fw-bold"},"付款",-1),R=s("p",null,"差一步完成訂單，點選確認付款完成訂單",-1),U=s("p",null,"因對於咖啡豆品質要求，收到訂單開始製作，大約 1 ~ 2天出貨",-1),j=[M,R,U],A={class:"col-md-5 mt-3"},B={class:"my-5 row d-flex justify-content-center"},D=s("p",{class:"h4 text-primary fw-bold"},"訂單明細",-1),P={class:"table align-middle mt-4 border-bottom text-muted border-dark"},$=["src","alt"],z={class:"fw-bold"},F={class:"text-secondary text-end",style:{"white-space":"nowrap"}},H={class:"text-end"},q=s("td",{colspan:"2",class:"text-end h4 fw-bold"},"總計",-1),X={colspan:"2",class:"text-end h4 fw-bold"},G={class:"table"},J={class:"row"},K=s("th",{class:"col-md-3"},"Email",-1),Q={class:"col-md-9"},W={class:"row"},Y=s("th",{class:"col-md-3"},"姓名",-1),Z={class:"col-md-9"},ss={class:"row"},ts=s("th",{class:"col-md-3 text-nowrap"},"收件人電話",-1),es={class:"col-md-9"},os={class:"row"},rs=s("th",{class:"col-md-3 text-nowrap"},"收件人地址",-1),ds={class:"col-md-9"},cs={class:"row"},as=s("th",{class:"col-md-3 text-nowrap"},"付款狀態",-1),is={class:"col-md-9"},ns={key:0},ls={key:1,class:"text-success fw-bold"},_s={key:0,class:"text-center"},hs=s("button",{type:"submit",class:"btn btn-danger"},"確認付款去",-1),ps=[hs];function us(c,a,ms,fs,t,i){const u=n("LoadingOverLay"),m=n("router-link");return r(),d("div",I,[l(u,{active:c.isLoading,"z-index":1060},null,8,["active"]),s("div",S,[t.order.is_paid===!0?(r(),d("div",T,[N,l(m,{to:"/",class:"btn btn-outline-dark mr-2 rounded-0 mt-4"},{default:g(()=>[L(" 回到首頁 ")]),_:1})])):(r(),d("div",C,j)),s("div",A,[s("div",B,[s("form",{class:"border p-4 mb-4 border-dark",onSubmit:a[0]||(a[0]=y((...e)=>i.payOrder&&i.payOrder(...e),["prevent"]))},[D,s("table",P,[s("tbody",null,[(r(!0),d(w,null,x(t.order.products,e=>(r(),d("tr",{key:e.id},[s("img",{src:e.product.imageUrl,alt:e.product.title,class:"me-2",style:{width:"100px",height:"100px","object-fit":"cover"}},null,8,$),s("td",z,o(e.product.title),1),s("td",F," X"+o(e.qty)+o(e.product.unit),1),s("td",H," NT$"+o(c.$filters.currency(e.final_total)),1)]))),128))]),s("tfoot",null,[s("tr",null,[q,s("td",X,o(c.$filters.currency(t.order.total)),1)])])]),s("table",G,[s("tbody",null,[s("tr",J,[K,s("td",Q,o(t.order.user.email),1)]),s("tr",W,[Y,s("td",Z,o(t.order.user.name),1)]),s("tr",ss,[ts,s("td",es,o(t.order.user.tel),1)]),s("tr",os,[rs,s("td",ds,o(t.order.user.address),1)]),s("tr",cs,[as,s("td",is,[t.order.is_paid?(r(),d("span",ls,"付款完成")):(r(),d("span",ns,"尚未付款"))])])])]),t.order.is_paid===!1?(r(),d("div",_s,ps)):v("",!0)],32)])])])])}const ws=f(V,[["render",us]]);export{ws as default};
