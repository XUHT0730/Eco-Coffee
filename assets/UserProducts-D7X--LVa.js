import{_ as C,p as x,m as p,r as g,o as i,c,a,b as t,d as T,v as E,n as b,e as d,F as m,i as k,f as _,t as n,h as f,w as V}from"./index-O4EEIHBO.js";import{c as $}from"./cartStore-otakfmji.js";import{t as w}from"./trackStore-CnNthuYI.js";import{t as M}from"./toastMessage-Qj9VyzYM.js";import{P as S}from"./PaginationComponent-riF9GFhs.js";import"./sweetalert2.all-EK7c56Sq.js";var U={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"hedy-api-path",BASE_URL:"/Eco-Coffee/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:O,VITE_PATH:R}=U,D={data(){return{status:{loadingItem:""},isLoading:!1,fullPage:!1,products:[],categories:["赫根山 Mount Hagen","生態綠 OKOGREEN","畢嘉士","微笑人咖啡 Laughing Man Coffee"],product:{},search:"",cart:{},pagination:{}}},computed:{...x(w,["trackList"])},methods:{...p(M,["pushMessage"]),...p($,["addToCart"]),...p(w,["getTrack","setTrack"]),getProducts(e=1){const{category:r=""}=this.$route.query,v=`${O}/api/${R}/products?category=${r}&page=${e}`;this.isLoading=!0,this.axios.get(v).then(h=>{const{pagination:o}=h.data;this.pagination=o,this.products=h.data.products,this.isLoading=!1,this.products=this.products.filter(u=>u.title.trim().toLowerCase().includes(this.search.toLowerCase()))}).catch(()=>{this.isLoading=!1})},getProduct(e){this.$router.push(`product/${e}`)}},components:{PaginationComponent:S},watch:{search(e){this.getProducts(1,e)},"$route.query":{handler(){this.getProducts()},deep:!0}},created(){this.getProducts(),this.getTrack()}},I={class:"bg-light py-4"},N={class:"container"},q={class:"row d-flex justify-content-end"},A={class:"col-md-3"},B={class:"input-group w-100 mt-md-0 mt-3"},j=t("div",{class:"input-group-append"},[t("button",{class:"btn btn-primary py-2",type:"button",id:"search"},[t("i",{class:"bi bi-search"})])],-1),H={class:"container ec-container"},z={class:"row mt-5 mt-md-5 mt-3"},F={class:"col-lg-2 col-md-3 mb-5"},G={class:"list-group"},K={class:"col-lg-10 col-lg-10 col-md-9 mb-5"},J={class:"vl-parent"},Q={class:"row row-cols-3 g-4"},W={key:0,class:"col"},X=t("p",null,"查無此商品",-1),Y=[X],Z={class:"card product-card shadow bg-white mb-sm-4 ms-md-4 m-sm-auto"},tt=["src"],st={class:"card-body position-relative"},et={class:"row d-flex"},ot={class:"col"},it={class:"left w-100"},ct={class:"bg-secondary position-absolute fs-6 px-2 py-1 text-white category"},at={class:"col-3"},nt={class:"right w-100 text-end"},rt=["onClick"],lt={key:0},dt=t("i",{class:"bi bi-heart-fill fs-4 text-danger"},null,-1),_t=[dt],ht={key:1},ut=t("i",{class:"bi bi-heart fs-4 text-danger"},null,-1),pt=[ut],gt={class:"card-title pt-2 fw-bold"},mt={key:0,class:"h5"},ft={key:1,class:"h6 text-dark"},vt={key:2,class:"h5 fw-bold"},yt=["onClick"],bt=t("i",{class:"bi bi-cart-check"},null,-1);function kt(e,r,v,h,o,u){const y=g("LoadingOverLay"),l=g("router-link"),L=g("PaginationComponent");return i(),c(m,null,[a(y,{active:o.isLoading,"z-index":1060},null,8,["active"]),t("section",I,[t("div",N,[t("div",q,[t("div",A,[t("div",B,[T(t("input",{type:"text","onUpdate:modelValue":r[0]||(r[0]=s=>o.search=s),class:"form-control border-primary py-2",placeholder:"快速搜尋 ex : 低咖啡因、濾掛"},null,512),[[E,o.search,void 0,{trim:!0}]]),j])])])])]),t("section",H,[t("div",z,[t("div",F,[t("ul",G,[t("li",{class:b([{active:!e.$route.query.category},"list-group-item"])},[a(l,{class:"py-2 d-block",style:{color:"black"},to:"/products"},{default:d(()=>[_("全部商品")]),_:1})],2),(i(!0),c(m,null,k(o.categories,s=>(i(),c("li",{key:s,class:b(["list-group-item",{active:e.$route.query.category===s}])},[a(l,{class:"py-2 d-block",style:{color:"black"},to:`/products?category=${s}`},{default:d(()=>[_(n(s),1)]),_:2},1032,["to"])],2))),128))])]),t("div",K,[t("div",J,[a(y,{active:o.isLoading,"is-full-page":o.fullPage},null,8,["active","is-full-page"]),t("div",Q,[o.products.length===0?(i(),c("div",W,Y)):(i(!0),c(m,{key:1},k(o.products,s=>(i(),c("div",{class:"col-12 col-xl-4 col-lg-5 d-flex justify-content-center",key:s.id},[t("div",Z,[a(l,{to:`/product/${s.id}`,class:"product-card-link"},{default:d(()=>[t("img",{src:s.imageUrl,class:"product-card-img"},null,8,tt)]),_:2},1032,["to"]),t("div",st,[t("div",et,[t("div",ot,[t("div",it,[t("div",ct,n(s.category),1)])]),t("div",at,[t("div",nt,[t("div",{onClick:P=>e.setTrack(s.id)},[e.trackList.includes(s.id)?(i(),c("span",lt,_t)):(i(),c("span",ht,pt))],8,rt)])])]),t("h5",gt,[a(l,{to:`/product/${s.id}`},{default:d(()=>[_(n(s.title),1)]),_:2},1032,["to"])]),t("td",null,[s.price?f("",!0):(i(),c("div",mt,n(e.item.origin_price)+" 元 ",1)),s.price?(i(),c("del",ft," 原價 "+n(s.origin_price)+" 元",1)):f("",!0),s.price?(i(),c("div",vt," 現在只要 "+n(s.price)+" 元 ",1)):f("",!0)]),t("button",{class:"btn btn-primary w-100",type:"button",onClick:V(P=>e.addToCart(s.id),["prevent"])},[bt,_(" 加入購物車 ")],8,yt)])])]))),128))])])]),a(L,{class:"d-flex justify-content-center",pagination:o.pagination,onEmitPages:u.getProducts},null,8,["pagination","onEmitPages"])])])],64)}const Et=C(D,[["render",kt]]);export{Et as default};
