import{_ as x,m as b,r as n,o,c,a as r,b as t,F as m,i as y,e as l,t as a,f as _,h,w as L}from"./index-BSBb-qkF.js";import{S as w}from"./sweetalert2.all-CRK_X6FK.js";import{c as T}from"./cartStore-B9Ghn__G.js";var S={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"hedy-api-path",BASE_URL:"/Eco-Coffee/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:C,VITE_PATH:E}=S,V={data(){return{isLoading:!1,products:[],trackList:[],cart:{}}},computed:{filterProducts(){return this.products.filter(e=>this.trackList.includes(e.id))}},methods:{...b(T,["addToCart"]),getProducts(){this.isLoading=!0;const e=`${C}/api/${E}/products/all`;this.axios.get(e).then(i=>{this.products=i.data.products,this.isLoading=!1}).catch(i=>{this.isLoading=!1,alert(i.response.data.message)})},getTrack(){const e=localStorage.getItem("homeTrack");e&&(this.trackList=JSON.parse(e))},setTrack(e){if(this.trackList.includes(e)){const i=this.trackList.findIndex(u=>u===e);this.trackList.splice(i,1)}else this.trackList.push(e);w.fire({icon:"success",title:"己移除收藏清單",showConfirmButton:!1,timer:1500}),localStorage.setItem("homeTrack",JSON.stringify(this.trackList)),this.getTrack()}},mounted(){this.getProducts(),this.getTrack()}},P={class:"position-relative mb-6 ec-container"},I={key:0},R={class:"container"},N={class:"row d-flex justify-content-center"},O=t("div",{class:"col-12 text-center text-dark mt-xl-7 mt-lg-7 mt-md-7","data-aos":"fade-down"},[t("div",{class:"h3 fw-bold mt-5 mb-2"}," 追蹤商品 ")],-1),B={class:"row row-cols-3 g-4 col-lg-12 col-md-10 mb-5 d-flex justify-content-center"},U={class:"card product-card shadow bg-white mb-sm-4 ms-md-4 m-sm-auto"},$=["src"],A={class:"card-body position-relative"},D={class:"row d-flex"},j={class:"col"},F={class:"left w-100"},H={class:"bg-secondary position-absolute fs-6 px-2 py-1 text-white category"},J={class:"col-3"},M={class:"right w-100 text-end"},z=["onClick"],q={key:0},G=t("i",{class:"bi bi-heart-fill fs-4 text-danger"},null,-1),K=[G],Q={key:1},W=t("i",{class:"bi bi-heart fs-4 text-danger"},null,-1),X=[W],Y={class:"card-title pt-2 fw-bold"},Z={key:0,class:"h5"},tt={key:1,class:"h6 text-dark"},st={key:2,class:"h5 fw-bold"},et=["onClick"],ot=t("i",{class:"bi bi-cart-check"},null,-1),ct={key:1,class:"text-center mb-7 mb-md-9 pt-7 pt-md-9"},it=t("h2",{class:"text-dark mt-6"},"沒有追蹤商品，快去逛逛",-1),at=t("p",{class:"text-primary my-4 mb-md-5"},"前往商品列表",-1);function rt(e,i,u,dt,p,d){const k=n("LoadingOverLay"),f=n("router-link"),g=n("RouterLink");return o(),c(m,null,[r(k,{active:p.isLoading,"z-index":1060,class:"text-center"},null,8,["active"]),t("section",P,[d.filterProducts.length>0?(o(),c("div",I,[t("div",R,[t("div",N,[O,t("div",B,[(o(!0),c(m,null,y(d.filterProducts,s=>(o(),c("div",{key:s.id,class:"col-12 col-xl-4 col-lg-5 d-flex justify-content-center"},[t("div",U,[r(f,{to:`/product/${s.id}`,class:"product-card-link"},{default:l(()=>[t("img",{src:s.imageUrl,class:"product-card-img"},null,8,$)]),_:2},1032,["to"]),t("div",A,[t("div",D,[t("div",j,[t("div",F,[t("div",H,a(s.category),1)])]),t("div",J,[t("div",M,[t("div",{onClick:v=>d.setTrack(s.id)},[p.trackList.includes(s.id)?(o(),c("span",q,K)):(o(),c("span",Q,X))],8,z)])])]),t("h5",Y,[r(f,{to:`/product/${s.id}`},{default:l(()=>[_(a(s.title),1)]),_:2},1032,["to"])]),t("td",null,[s.price?h("",!0):(o(),c("div",Z,a(s.origin_price)+" 元 ",1)),s.price?(o(),c("del",tt," 原價 "+a(s.origin_price)+" 元",1)):h("",!0),s.price?(o(),c("div",st," 現在只要 "+a(s.price)+" 元 ",1)):h("",!0)]),t("button",{class:"btn btn-primary w-100",type:"button",onClick:L(v=>e.addToCart(s.id),["prevent"])},[ot,_(" 加入購物車")],8,et)])])]))),128))])])])])):(o(),c("div",ct,[it,at,r(g,{to:"/products",class:"fs-5 btn btn-primary py-3 px-5"},{default:l(()=>[_(" 查看商品 ")]),_:1})]))])],64)}const ht=x(V,[["render",rt]]);export{ht as default};
