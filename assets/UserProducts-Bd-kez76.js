import{_ as T,p as E,m as p,r as u,o,c as a,b as t,d as $,v as S,n as f,a as r,e as h,F as g,i as v,g as V,h as y,f as m,t as n,w as U}from"./index-CRfqc60q.js";import{c as M}from"./cartStore-Pz2VlNCe.js";import{t as k}from"./trackStore-BYaULkG_.js";import{t as N}from"./toastMessage-nbHYJ_0i.js";import{P as O}from"./PaginationComponent-THh0UYRu.js";import"./sweetalert2.all-CXSejtdh.js";var R={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"hedy-api-path",BASE_URL:"/Eco-Coffee/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:b,VITE_PATH:w}=R,B={data(){return{status:{loadingItem:""},isLoading:!1,fullPage:!1,products:[],categories:["赫根山 Mount Hagen","生態綠 OKOGREEN","畢嘉士","微笑人咖啡 Laughing Man Coffee"],product:{},search:"",cart:{},pagination:{}}},computed:{...E(k,["trackList"])},methods:{...p(N,["pushMessage"]),...p(M,["addToCart"]),...p(k,["getTrack","setTrack"]),getProducts(e=1){const{category:c=""}=this.$route.query,l=`${b}/api/${w}/products?category=${c}&page=${e}`;this.isLoading=!0,this.axios.get(l).then(_=>{const{pagination:i}=_.data;this.pagination=i,this.products=_.data.products,this.isLoading=!1}).catch(()=>{this.isLoading=!1})},getProduct(e){this.$router.push(`product/${e}`)},getSearch(){const e=`${b}/api/${w}/products/all`;this.isLoading=!0,this.axios.get(e).then(c=>{this.products=c.data.products,this.isLoading=!1,this.products=this.products.filter(l=>l.title.trim().toLowerCase().includes(this.search.toLowerCase()))}).catch(()=>{this.isLoading=!1})}},components:{PaginationComponent:O},watch:{search(e){this.getSearch(1,e)},"$route.query":{handler(){this.getProducts()},deep:!0}},created(){this.getProducts(),this.getTrack(),this.getSearch()}},D={class:"bg-light py-4"},I={class:"container"},q={class:"row d-flex justify-content-end"},A={class:"col-md-3"},j={class:"input-group w-100 mt-md-0 mt-3"},H=t("div",{class:"input-group-append"},[t("button",{class:"btn btn-primary py-2",type:"button",id:"search"},[t("i",{class:"bi bi-search"})])],-1),F={class:"container ec-container"},z={class:"row mt-5 mt-md-5 mt-3"},G={class:"col-lg-2 col-md-3 mb-5"},K={class:"list-group"},J={class:"col-lg-10 col-lg-10 col-md-9 mb-5"},Q={class:"vl-parent"},W={class:"row row-cols-3 g-4"},X={key:0,class:"col"},Y=t("p",{class:"h4 text-danger"},"Sorry ~ 查無此商品",-1),Z=[Y],tt={class:"card product-card shadow bg-white mb-sm-4 ms-md-4 m-sm-auto"},st=["src","alt"],et={class:"card-body position-relative"},ot={class:"row d-flex align-items-center"},it={class:"col"},at={class:"w-auto"},ct={class:"bg-secondary fs-8 px-2 py-1 text-white category",style:{width:"fit-content"}},nt={class:"col-2 track"},rt={class:"w-100 text-end"},lt=["onClick"],dt={key:0},ht=t("i",{class:"bi bi-heart-fill fs-3 text-danger"},null,-1),_t=[ht],pt={key:1},ut=t("i",{class:"bi bi-heart fs-3 text-danger"},null,-1),gt=[ut],mt={class:"card-title pt-2 fw-bold"},ft={key:0,class:"h5 fw-bold"},vt={key:1},yt={class:"h6 text-dark"},kt={key:0,class:"h5 fw-bold"},bt=["onClick"],wt=t("i",{class:"bi bi-cart-check"},null,-1);function Lt(e,c,l,_,i,L){const d=u("router-link"),x=u("LoadingOverLay"),P=u("PaginationComponent");return o(),a(g,null,[t("section",D,[t("div",I,[t("div",q,[t("div",A,[t("div",j,[$(t("input",{type:"text","onUpdate:modelValue":c[0]||(c[0]=s=>i.search=s),class:"form-control border-primary py-2",placeholder:"快速搜尋 ex : 低咖啡因、濾掛"},null,512),[[S,i.search,void 0,{trim:!0}]]),H])])])])]),t("section",F,[t("div",z,[t("div",G,[t("ul",K,[t("li",{class:f([{active:!e.$route.query.category},"list-group-item"])},[r(d,{class:"py-2 d-block",to:"/products"},{default:h(()=>[m("全部商品")]),_:1})],2),(o(!0),a(g,null,v(i.categories,s=>(o(),a("li",{key:s,class:f(["list-group-item",{active:e.$route.query.category===s}])},[r(d,{class:"py-2 d-block",to:`/products?category=${s}`},{default:h(()=>[m(n(s),1)]),_:2},1032,["to"])],2))),128))])]),t("div",J,[t("div",Q,[r(x,{active:i.isLoading,"is-full-page":i.fullPage},null,8,["active","is-full-page"]),t("div",W,[i.products.length===0?(o(),a("div",X,Z)):(o(!0),a(g,{key:1},v(i.products,s=>(o(),a("div",{class:"col-12 col-xl-4 col-lg-5 d-flex justify-content-center",key:s.id},[t("div",tt,[r(d,{to:`/product/${s.id}`,class:"product-card-link"},{default:h(()=>[t("img",{src:s.imageUrl,alt:s.title,class:"product-card-img"},null,8,st)]),_:2},1032,["to"]),t("div",et,[t("div",ot,[t("div",it,[t("div",at,[t("div",ct,n(s.category),1)])]),t("div",nt,[t("div",rt,[t("div",{onClick:C=>e.setTrack(s.id)},[e.trackList.includes(s.id)?(o(),a("span",dt,_t)):(o(),a("span",pt,gt))],8,lt)])])]),r(d,{to:`/product/${s.id}`},{default:h(()=>[t("h5",mt,n(s.title),1)]),_:2},1032,["to"]),t("td",null,[s.origin_price===s.price?(o(),a("div",ft," NT$ "+n(s.price)+" 元 ",1)):(o(),a("div",vt,[t("del",yt,"原價 "+n(s.origin_price)+" 元",1),s.price?(o(),a("div",kt," 現在只要 NT$ "+n(s.price)+" 元 ",1)):y("",!0)]))]),t("button",{class:"btn btn-primary w-100",type:"button",onClick:U(C=>e.addToCart(s.id),["prevent"])},[wt,m(" 加入購物車 ")],8,bt)])])]))),128))])])]),i.products.length>6?(o(),V(P,{key:0,class:"d-flex justify-content-center",pagination:i.pagination,onEmitPages:L.getProducts},null,8,["pagination","onEmitPages"])):y("",!0)])])],64)}const St=T(B,[["render",Lt]]);export{St as default};
