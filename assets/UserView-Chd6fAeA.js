import{k as it,l as nt,p as I,m as y,_ as T,o as _,c as f,b as t,d as K,q as W,F as L,i as lt,h as E,f as g,t as w,r as p,a as n,e as m,n as ct,s as rt}from"./index-BSozKmo9.js";import{t as D}from"./toastMessage-BXV5X5-Q.js";import{C as dt}from"./collapse-D9PPv8Fu.js";import{c as A}from"./cartStore-Krg_bhmG.js";import{t as z}from"./trackStore-RdI0h2QM.js";import{S as x}from"./sweetalert2.all-3qzGwAKY.js";import{r as ht,a as ut,b as _t,c as ft}from"./selector-engine-snYEERjk.js";import{r as pt,a as mt,b as bt,c as gt}from"./scrollbar-C-oPJ-Tv.js";import{T as vt}from"./ToastModal-FvtPznWK.js";var U={exports:{}};/*!
  * Bootstrap offcanvas.js v5.3.3 (https://getbootstrap.com/)
  * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */(function(s,e){(function(d,l){s.exports=l(ht(),ut(),_t(),pt(),mt(),bt(),ft(),gt())})(it,function(d,l,c,i,r,o,v,k){const h="offcanvas",b=".bs.offcanvas",O=".data-api",G=`load${b}${O}`,X="Escape",R="show",M="showing",B="hiding",j="offcanvas-backdrop",q=".offcanvas.show",H=`show${b}`,Q=`shown${b}`,J=`hide${b}`,F=`hidePrevented${b}`,P=`hidden${b}`,Z=`resize${b}`,tt=`click${b}${O}`,st=`keydown.dismiss${b}`,et='[data-bs-toggle="offcanvas"]',ot={backdrop:!0,keyboard:!0,scroll:!1},at={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class C extends d{constructor(a,u){super(a,u),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return ot}static get DefaultType(){return at}static get NAME(){return h}toggle(a){return this._isShown?this.hide():this.show(a)}show(a){if(this._isShown||l.trigger(this._element,H,{relatedTarget:a}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new k().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(M);const Y=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(R),this._element.classList.remove(M),l.trigger(this._element,Q,{relatedTarget:a})};this._queueCallback(Y,this._element,!0)}hide(){if(!this._isShown||l.trigger(this._element,J).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(B),this._backdrop.hide();const u=()=>{this._element.classList.remove(R,B),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new k().reset(),l.trigger(this._element,P)};this._queueCallback(u,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const a=()=>{if(this._config.backdrop==="static"){l.trigger(this._element,F);return}this.hide()},u=!!this._config.backdrop;return new i({className:j,isVisible:u,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:u?a:null})}_initializeFocusTrap(){return new o({trapElement:this._element})}_addEventListeners(){l.on(this._element,st,a=>{if(a.key===X){if(this._config.keyboard){this.hide();return}l.trigger(this._element,F)}})}static jQueryInterface(a){return this.each(function(){const u=C.getOrCreateInstance(this,a);if(typeof a=="string"){if(u[a]===void 0||a.startsWith("_")||a==="constructor")throw new TypeError(`No method named "${a}"`);u[a](this)}})}}return l.on(document,tt,et,function($){const a=c.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&$.preventDefault(),v.isDisabled(this))return;l.one(a,P,()=>{v.isVisible(this)&&this.focus()});const u=c.findOne(q);u&&u!==a&&C.getInstance(u).hide(),C.getOrCreateInstance(a).toggle(this)}),l.on(window,G,()=>{for(const $ of c.find(q))C.getOrCreateInstance($).show()}),l.on(window,Z,()=>{for(const $ of c.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle($).position!=="fixed"&&C.getOrCreateInstance($).hide()}),r.enableDismissTrigger(C),v.defineJQueryPlugin(C),C})})(U);var kt=U.exports;const Ct=nt(kt);var wt={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"hedy-api-path",BASE_URL:"/Eco-Coffee/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:S,VITE_PATH:N}=wt,$t={data(){return{products:[],offcanvas:{},status:{loadingItem:""}}},computed:{...I(A,["cart","carts"])},methods:{...y(D,["pushMessage"]),...y(A,["getCart"]),getProducts(){this.isLoading=!0;const s=`${S}/api/${N}/products/all`;this.axios.get(s).then(e=>{this.products=e.data.products,this.isLoading=!1}).catch(()=>{this.isLoading=!1})},delAllCarts(){x.fire({title:"確定清空購物車?",icon:"question",showCancelButton:!0,cancelButtonColor:"#6E7881",confirmButtonColor:"#198754",cancelButtonText:"取消",confirmButtonText:"確定",reverseButtons:!0}).then(s=>{if(s.isConfirmed){const e=`${S}/api/${N}/carts`;this.axios.delete(e).then(d=>{this.getCart(),x.fire({title:"清除購物車",content:d.data.message,icon:"success"})}).catch(d=>{x.fire({icon:"error",title:d.response.data.message})})}})},delCartItem(s){this.status.loadingItem=s;const e=`${S}/api/${N}/cart/${s}`;this.axios.delete(e).then(d=>{this.pushMessage({style:"success",title:"移除購物車品項",content:d.data.message}),this.status.loadingItem="",this.getCart()}).catch(d=>{this.isLoading=!1,this.pushMessage({style:"danger",title:"移除購物車品項",content:d.response.data.message})})}},mounted(){this.getProducts(),this.getCart(),this.offcanvas=new Ct(this.$refs.cartOffcanvas,{toggle:!1})}},yt={ref:"cartOffcanvas",class:"offcanvas offcanvas-end",tabindex:"-1",id:"offcanvasRight","aria-labelledby":"offcanvasRightLabel"},Et=t("div",{class:"offcanvas-header bg-primary py-4 text-white"},[t("h4",{class:"offcanvas-title text-white fw-bold",id:"offcanvasRightLabel",style:{"white-space":"nowrap"}}," 購物車 "),t("button",{type:"button",class:"btn d-flex","data-bs-dismiss":"offcanvas","aria-label":"Close",style:{"margin-left":"15rem"}},[t("i",{class:"bi bi-x-lg fs-5 text-white fw-bold"})])],-1),Tt={class:"offcanvas-body"},xt={class:"text-end my-3"},Lt={class:"position-relative h-75"},At={key:0,class:"text-center position-absolute top-50 start-50 translate-middle"},St=t("p",{class:"fs-3 my-4"},"購物車為空",-1),Nt={key:1},It={key:0,class:"d-flex align-items-center mb-2 pb-2 border-bottom"},Dt=["src","alt"],Vt={class:"w-100 p-3 position-relative"},Ot=["onClick","disabled"],Rt={key:0,class:"fas fa-spinner fa-pulse"},Mt={class:"mb-2 fw-bold me-4"},Bt={class:"mt-4"},qt={class:"text-end fs-3 mb-4"};function Ft(s,e,d,l,c,i){var r;return _(),f("div",yt,[Et,t("div",Tt,[t("div",xt,[K(t("button",{type:"button",class:"btn btn-outline-secondary",onClick:e[0]||(e[0]=(...o)=>i.delAllCarts&&i.delAllCarts(...o))}," 清空購物車 ",512),[[W,(r=this.carts)==null?void 0:r.length]])]),t("div",Lt,[s.carts.length===0?(_(),f("div",At,[St,t("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"offcanvas",onClick:e[1]||(e[1]=o=>s.$router.push("/products"))}," 前往購物 ")])):(_(),f("div",Nt,[s.cart.carts?(_(),f(L,{key:0},[(_(!0),f(L,null,lt(s.cart.carts,o=>(_(),f("div",{key:o.id},[o.product?(_(),f("div",It,[t("img",{src:o.product.imageUrl,alt:o.product.title,class:"object-fit-cover",style:{width:"80px",height:"80px"}},null,8,Dt),t("div",Vt,[t("button",{type:"button",class:"btn btn-outline-dark position-absolute fw-bold border-0",style:{top:"10px",right:"9px"},onClick:v=>i.delCartItem(o.id),disabled:c.status.loadingItem===o.id},[c.status.loadingItem===o.id?(_(),f("i",Rt)):E("",!0),g(" X ")],8,Ot),t("div",null,[t("p",Mt,w(o.product.title),1),t("span",null,w(o.qty)+" "+w(o.product.unit)+" x ",1),t("span",null,"NT$ "+w(o.product.price),1)])])])):E("",!0)]))),128)),t("div",Bt,[t("p",qt," 總計$NT "+w(s.$filters.currency(s.cart.total)),1),t("button",{type:"button",class:"btn btn-primary w-100 py-2 mb-4",onClick:e[2]||(e[2]=o=>this.$router.push("/cart")),"data-bs-dismiss":"offcanvas"}," 前往結帳 ")])],64)):E("",!0)]))])])],512)}const Pt=T($t,[["render",Ft]]),Yt={components:{CartOffCanvas:Pt},computed:{...I(z,["trackList"]),...I(A,["carts"])},methods:{...y(D,["pushMessage"]),...y(A,["getCart"]),...y(z,["getTrack"]),openCollapse(){this.collapse.show()},closeCollapse(){this.collapse.hide()}},mounted(){this.getCart(),this.getTrack(),this.collapse=new dt(this.$refs.collapse,{toggle:!1})}},zt={class:"navbar navbar-expand-lg navbar-dark bg-primary sticky-top py-2"},Kt={class:"container-fluid"},Wt=t("i",{class:"bi bi-cup-hot ff-minor fs-3"},null,-1),Ut=t("span",{class:"ms-2 fw-bold ff-minor"},"Eco-Coffee",-1),Gt=t("span",{class:"navbar-toggler-icon ff-minor"},null,-1),Xt=[Gt],jt={id:"lokiNavbar",ref:"collapse",class:"collapse navbar-collapse"},Ht={class:"navbar-nav me-auto mb-2 mb-lg-0 fs-6"},Qt={class:"nav navbar-nav d-flex me-2"},Jt=t("i",{class:"bi bi-heart-fill icon fs-4"},null,-1),Zt={key:0,class:"badge rounded-pill bg-danger",style:{transform:"translateX(-2px) translateY(-18px)"}},ts=t("span",{class:"visually-hidden"},"unread messages",-1),ss=t("i",{class:"bi bi-cart icon fs-4"},null,-1),es={key:0,class:"badge rounded-pill bg-danger",style:{transform:"translateX(-2px) translateY(-18px)"}},os=t("span",{class:"visually-hidden"},"unread messages",-1),as=t("i",{class:"bi bi-person-circle icon fs-4"},null,-1);function is(s,e,d,l,c,i){var k;const r=p("RouterLink"),o=p("router-link"),v=p("CartOffCanvas");return _(),f(L,null,[t("nav",zt,[t("div",Kt,[n(r,{to:"/",onClick:i.closeCollapse,class:"fs-3 navbar-brand align-items-center me-2"},{default:m(()=>[Wt,Ut]),_:1},8,["onClick"]),t("button",{class:"navbar-toggler","data-bs-toggle":"collapse",onClick:e[0]||(e[0]=(...h)=>i.openCollapse&&i.openCollapse(...h)),"data-bs-target":"#lokiNavbar"},Xt),t("div",jt,[t("div",Ht,[n(r,{to:"/about",onClick:i.closeCollapse,class:"nav-item nav-link"},{default:m(()=>[g("了解公平貿易")]),_:1},8,["onClick"]),n(r,{to:"/products",onClick:i.closeCollapse,class:"nav-item nav-link"},{default:m(()=>[g("產品列表")]),_:1},8,["onClick"]),n(r,{to:"/articles",onClick:i.closeCollapse,class:"nav-item nav-link"},{default:m(()=>[g("部落格")]),_:1},8,["onClick"]),n(o,{to:"/fqa",onClick:i.closeCollapse,class:"nav-item nav-link"},{default:m(()=>[g(" 常見問題")]),_:1},8,["onClick"])]),t("div",Qt,[n(r,{to:"/track",onClick:i.closeCollapse,class:"btn btn-primary d-flex align-items-center nav-item nav-link position-relative me-1"},{default:m(()=>{var h;return[Jt,s.trackList.length>0?(_(),f("span",Zt,[g(w((h=this.trackList)==null?void 0:h.length)+" ",1),ts])):E("",!0)]}),_:1},8,["onClick"]),t("button",{class:"btn btn-primary nav-item nav-link position-relative d-flex align-items-center me-1",type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasRight","aria-controls":"offcanvasRight",onClick:e[1]||(e[1]=(...h)=>s.getCart&&s.getCart(...h))},[ss,s.carts.length>0?(_(),f("span",es,[g(w((k=this.carts)==null?void 0:k.length)+" ",1),os])):E("",!0)]),n(o,{to:"/login",class:"nav-item nav-link me-1"},{default:m(()=>[as]),_:1})])],512)])]),n(v,{ref:"cartOffCanvas",onClick:i.closeCollapse},null,8,["onClick"])],64)}const ns=T(Yt,[["render",is]]),ls={data(){return{email:"",coupon:"coupon2024",isLoading:!1}},methods:{subscribe(){this.isLoading=!0,this.emil="",setTimeout(()=>{this.isLoading=!1,this.$refs.form.resetForm()},1e3),x.fire({icon:"success",title:"成功訂閱",text:`恭喜獲得優惠碼: ${this.coupon}`,showConfirmButton:!0,allowOutsideClick:!0})}}},cs={class:"border-2 bg-primary border-top mt-5 footer"},rs={class:"container text-white text-center"},ds={class:"row d-lg-none d-md-none"},hs=t("i",{class:"bi bi-cup-hot"},null,-1),us=t("span",{class:"ms-2 fw-bold text-white ff-minor"},"Eco-Coffee",-1),_s=t("p",{class:"pt-2 pb-1 text-center"},[t("small",null,"無商業用途，僅供學習使用")],-1),fs={class:"footer__wrapper d-none d-sm-block"},ps={class:"row"},ms={class:"col-md-4 mb-3"},bs={class:"footer-block"},gs=t("p",{class:"h4 fw-bold mb-3"},"首次下單可享 15% 優惠",-1),vs=t("p",null,"訂閱獲取優惠卷 & 最新商品",-1),ks={class:"mb-3"},Cs=t("label",{for:"email",class:"form-label"},"Email",-1),ws={class:"w-auto"},$s=["disabled"],ys={class:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"},Es={class:"col-md-4 mb-3"},Ts={class:"footer-block-center"},xs=t("p",{class:"h4 fw-bold mb-4"},"相關連結",-1),Ls={class:"footerul ps-6"},As={class:"mb-3"},Ss={class:"mb-3"},Ns={class:"footerul"},Is={class:"mb-3"},Ds=t("li",{class:"mb-3"},[t("a",{href:"#"},"聯絡我們")],-1),Vs=rt('<div class="col-md-4 mb-3"><div class="footer-block-center"><p class="h4 fw-bold mb-4">聯絡我們</p><div class="row"><div class="col-4 text-end"><a class="text-white" href="https://www.instagram.com/accounts/login/"><i class="bi bi-instagram footer-icon"></i></a></div><div class="col-4"><a class="text-white" href="https://www.facebook.com/?locale=zh_TW"><i class="bi bi-facebook footer-icon"></i></a></div><div class="col-4 text-start"><a class="text-white" href="https://mail.google.com/mail/"><i class="bi bi-envelope-heart footer-icon"></i></a></div></div></div></div>',1),Os=t("p",{class:"mb-0 text-center"},[t("small",null,"無商業用途，僅供學習使用")],-1);function Rs(s,e,d,l,c,i){const r=p("RouterLink"),o=p("VeeField"),v=p("ErrorMessage"),k=p("VeeForm"),h=p("router-link");return _(),f("footer",cs,[t("div",rs,[t("div",ds,[n(r,{to:"/",class:"fs-2 navbar-brand pt-4 pb-1"},{default:m(()=>[hs,us]),_:1}),_s]),t("div",fs,[t("div",ps,[t("div",ms,[t("div",bs,[gs,vs,n(k,{ref:"form",onSubmit:i.subscribe},{default:m(({errors:V})=>[t("div",ks,[Cs,n(o,{id:"email",name:"email",type:"email",class:ct(["form-control",{"is-invalid":V.email}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:c.email,"onUpdate:modelValue":e[0]||(e[0]=b=>c.email=b)},null,8,["class","modelValue"]),n(v,{name:"email",class:"invalid-feedback"})]),t("div",ws,[t("button",{type:"submit",class:"btn d-flex align-items-center py-2 px-6 px-sm-10 text-black fw-semibold",style:{"background-color":"#D7AD92"},disabled:c.isLoading},[K(t("span",ys,null,512),[[W,c.isLoading]]),g(" 訂閱 ")],8,$s)])]),_:1},8,["onSubmit"])])]),t("div",Es,[t("div",Ts,[xs,t("ul",Ls,[t("li",As,[n(h,{to:"/products"},{default:m(()=>[g("商品一覽")]),_:1})]),t("li",Ss,[n(h,{to:"/fqa"},{default:m(()=>[g("常見問題")]),_:1})])]),t("ul",Ns,[t("li",Is,[n(h,{to:"/articles"},{default:m(()=>[g("最新消息")]),_:1})]),Ds])])]),Vs]),Os])])])}const Ms=T(ls,[["render",Rs]]),Bs={data(){return{showTopIcon:!1}},mounted(){window.addEventListener("scroll",this.handleScroll)},methods:{handleScroll(){const s=window.innerHeight/2;window.scrollY>s?this.showTopIcon=!0:this.showTopIcon=!1},scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}}},qs=t("i",{class:"bi bi-arrow-up text-light",style:{"font-size":"2rem"},"aria-hidden":"true"},null,-1),Fs=[qs];function Ps(s,e,d,l,c,i){return c.showTopIcon?(_(),f("div",{key:0,class:"top",onClick:e[0]||(e[0]=(...r)=>i.scrollToTop&&i.scrollToTop(...r))},Fs)):E("",!0)}const Ys=T(Bs,[["render",Ps]]),zs={data(){return{}},methods:{...y(D,["pushMessage"])},components:{NavbarLayout:ns,FooterLayout:Ms,ToastModal:vt,TopComponent:Ys}};function Ks(s,e,d,l,c,i){const r=p("NavbarLayout"),o=p("ToastModal"),v=p("RouterView"),k=p("TopComponent"),h=p("FooterLayout");return _(),f(L,null,[n(r),n(o),n(v),n(k,{class:"top ps-2"}),n(h)],64)}const te=T(zs,[["render",Ks]]);export{te as default};
