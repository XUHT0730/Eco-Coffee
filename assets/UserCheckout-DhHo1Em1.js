import{_ as f,m as y,r as a,o as r,c as d,a as l,b as t,e as b,w as g,F as x,i as v,t as e,h as w,f as k}from"./index-BSBb-qkF.js";import{S as _}from"./sweetalert2.all-CRK_X6FK.js";import{t as L}from"./toastMessage-DYpqK0s_.js";var E={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"hedy-api-path",BASE_URL:"/Eco-Coffee/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:h,VITE_PATH:u}=E,O={data(){return{order:{user:{}},orderId:""}},methods:{...y(L,["pushMessage"]),getOrder(){const n=`${h}/api/${u}/order/${this.orderId}`;this.isLoading=!0,this.axios.get(n).then(i=>{this.order=i.data.order,this.isLoading=!1}).catch(i=>{this.isLoading=!1,this.pushMessage({style:"danger",title:"取得訂單失敗",content:i.response.data.message})})},payOrder(){const n=`${h}/api/${u}/pay/${this.orderId}`;this.isLoading=!0,this.axios.post(n).then(()=>{this.getOrder(),_.fire({title:"付款完成",icon:"success"}),this.isLoading=!1}).catch(()=>{this.isLoading=!1,_.fire({title:"付款失敗",icon:"warning"})})}},created(){this.orderId=this.$route.params.orderId,this.getOrder()}},I={class:"container my-5"},V={class:"row d-flex justify-content-center"},T={key:0,class:"col-md-6"},S=t("h2",{class:"text-primary fw-bold"},"訂單完成",-1),C=t("div",{class:"mt-4"},[t("h5",null,"感謝訂購"),t("p",{class:"ml-2"},"訂單完成預計 1 ~ 2 天出貨"),t("div",{style:{height:"300px","background-size":"cover","background-position":"center","background-image":"url('/src/assets/images/checkout.jpg')"}})],-1),M={key:1,class:"col-md-6"},N=t("h2",{class:"mb-5 text-primary fw-bold"},"付款",-1),R=t("p",null,"差一步完成訂單，點選確認付款完成訂單",-1),U=t("p",null,"因對於咖啡豆品質要求，收到訂單開始製作，大約 1 ~ 2天出貨",-1),j=[N,R,U],A={class:"col-md-5 mt-3"},B={class:"my-5 row d-flex justify-content-center"},D=t("p",{class:"h4 text-primary fw-bold"},"訂單明細",-1),P={class:"table align-middle mt-4 border-bottom text-muted border-dark"},$=["src"],z={class:"fw-bold"},F={class:"text-end"},H={class:"text-secondary text-end",style:{"white-space":"nowrap"}},q=t("td",{colspan:"2",class:"text-end h4 fw-bold"},"總計",-1),X={colspan:"2",class:"text-end h4 fw-bold"},G={class:"table"},J=t("p",{class:"h4 text-primary fw-bold py-2"},"顧客資料",-1),K=t("th",{width:"100"},"Email",-1),Q={class:"text-end"},W=t("th",null,"姓名",-1),Y={class:"text-end"},Z=t("th",null,"收件人電話",-1),tt={class:"text-end"},st=t("th",null,"收件人地址",-1),et={class:"text-end"},ot=t("th",null,"付款狀態",-1),rt={class:"text-end"},dt={key:0},nt={key:1,class:"text-success fw-bold"},it={key:0,class:"text-end"},ct=t("button",{type:"submit",class:"btn btn-danger"},"確認付款去",-1),at=[ct];function lt(n,i,_t,ht,s,c){const p=a("LoadingOverLay"),m=a("router-link");return r(),d("div",I,[l(p,{active:n.isLoading,"z-index":1060},null,8,["active"]),t("div",V,[s.order.is_paid===!0?(r(),d("div",T,[S,C,l(m,{to:"/",class:"btn btn-outline-dark mr-2 rounded-0 mt-4"},{default:b(()=>[k(" 回到首頁 ")]),_:1})])):(r(),d("div",M,j)),t("div",A,[t("div",B,[t("form",{class:"border p-4 mb-4 border-dark",onSubmit:i[0]||(i[0]=g((...o)=>c.payOrder&&c.payOrder(...o),["prevent"]))},[D,t("table",P,[t("tbody",null,[(r(!0),d(x,null,v(s.order.products,o=>(r(),d("tr",{key:o.id},[t("img",{src:o.product.imageUrl,class:"me-2",style:{width:"100px",height:"100px","object-fit":"cover"}},null,8,$),t("td",z,e(o.product.title),1),t("td",F,"NT$"+e(n.$filters.currency(o.final_total)),1),t("td",H," X"+e(o.qty)+e(o.product.unit),1)]))),128))]),t("tfoot",null,[t("tr",null,[q,t("td",X,e(n.$filters.currency(s.order.total)),1)])])]),t("table",G,[J,t("tbody",null,[t("tr",null,[K,t("td",Q,e(s.order.user.email),1)]),t("tr",null,[W,t("td",Y,e(s.order.user.name),1)]),t("tr",null,[Z,t("td",tt,e(s.order.user.tel),1)]),t("tr",null,[st,t("td",et,e(s.order.user.address),1)]),t("tr",null,[ot,t("td",rt,[s.order.is_paid?(r(),d("span",nt,"付款完成")):(r(),d("span",dt,"尚未付款"))])])])]),s.order.is_paid===!1?(r(),d("div",it,at)):w("",!0)],32)])])])])}const ft=f(O,[["render",lt]]);export{ft as default};
