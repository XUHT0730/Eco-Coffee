import{_ as f,m as y,r as n,o as r,c as d,a as l,b as s,e as b,w as g,F as x,i as w,t as o,h as v,s as k,f as L}from"./index-BANtfeDD.js";import{S as _}from"./sweetalert2.all-Cd_WS8vF.js";import{t as E}from"./toastMessage-D1PvazgW.js";const O="/Eco-Coffee/assets/checkout-BegyEK-g.jpg";var V={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"hedy-api-path",BASE_URL:"/Eco-Coffee/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:h,VITE_PATH:p}=V,I={data(){return{order:{user:{}},orderId:""}},methods:{...y(E,["pushMessage"]),getOrder(){const c=`${h}/api/${p}/order/${this.orderId}`;this.isLoading=!0,this.axios.get(c).then(i=>{this.order=i.data.order,this.isLoading=!1}).catch(i=>{this.isLoading=!1,this.pushMessage({style:"danger",title:"取得訂單失敗",content:i.response.data.message})})},payOrder(){const c=`${h}/api/${p}/pay/${this.orderId}`;this.isLoading=!0,this.axios.post(c).then(()=>{this.getOrder(),_.fire({title:"付款完成",icon:"success"}),this.isLoading=!1}).catch(()=>{this.isLoading=!1,_.fire({title:"付款失敗",icon:"warning"})})}},created(){this.orderId=this.$route.params.orderId,this.getOrder()}},T={class:"container my-5"},S={class:"row d-flex justify-content-center"},j={key:0,class:"col-md-6"},N=k('<h2 class="text-primary fw-bold">訂單完成</h2><div class="mt-4"><p class="h5"><span class="h5 me-1 text-primary fw-bold">付款已完成</span>感謝訂購 </p><p class="ml-2">訂單完成預計 1 ~ 2 天出貨</p><img src="'+O+'" class="object-fit-cover" style="height:300px;" alt="付款成功"></div>',2),C={key:1,class:"col-md-6"},B=s("h2",{class:"mb-5 text-primary fw-bold"},"付款",-1),M=s("p",null,"差一步完成訂單，點選確認付款完成訂單",-1),R=s("p",null,"因對於咖啡豆品質要求，收到訂單開始製作，大約 1 ~ 2天出貨",-1),U=[B,M,R],A={class:"col-md-5 mt-3"},D={class:"my-5 row d-flex justify-content-center"},$=s("p",{class:"h4 text-primary fw-bold"},"訂單明細",-1),P={class:"d-flex py-3 align-items-center"},F=["src","alt"],H={class:"flex-grow-1"},q={class:"d-md-flex justify-content-md-between align-items-md-center"},z={class:"mb-0 fw-bold"},K={class:"text-secondary mb-0",style:{"white-space":"nowrap"}},G={class:"mb-0"},J={class:"d-flex justify-content-between mt-4 border-bottom border-dark"},Q=s("p",{class:"text-end text-primary h4 fw-bold"},"總計",-1),W={class:"text-end text-primary h4 fw-bold mb-4"},X={class:"table mt-2"},Y={class:"row"},Z=s("th",{class:"col-md-3"},"Email",-1),ss={class:"col-md-9"},ts={class:"row"},es=s("th",{class:"col-md-3"},"姓名",-1),os={class:"col-md-9"},rs={class:"row"},ds=s("th",{class:"col-md-3 text-nowrap"},"收件人電話",-1),cs={class:"col-md-9"},is={class:"row"},as=s("th",{class:"col-md-3 text-nowrap"},"收件人地址",-1),ns={class:"col-md-9"},ls={class:"row"},_s=s("th",{class:"col-md-3 text-nowrap"},"付款狀態",-1),hs={class:"col-md-9"},ps={key:0},ms={key:1,class:"text-success fw-bold"},us={key:0,class:"text-center"},fs=s("button",{type:"submit",class:"btn btn-danger"},"確認付款去",-1),ys=[fs];function bs(c,i,gs,xs,t,a){const m=n("LoadingOverLay"),u=n("router-link");return r(),d("div",T,[l(m,{active:c.isLoading,"z-index":1060},null,8,["active"]),s("div",S,[t.order.is_paid===!0?(r(),d("div",j,[N,l(u,{to:"/",class:"btn btn-outline-dark mr-2 rounded-0 mt-4"},{default:b(()=>[L(" 回到首頁 ")]),_:1})])):(r(),d("div",C,U)),s("div",A,[s("div",D,[s("form",{class:"border p-4 mb-4 border-dark",onSubmit:i[0]||(i[0]=g((...e)=>a.payOrder&&a.payOrder(...e),["prevent"]))},[$,(r(!0),d(x,null,w(t.order.products,e=>(r(),d("div",{key:e.id,class:"align-middle mt-4 border-bottom border-dark"},[s("div",P,[s("img",{src:e.product.imageUrl,alt:e.product.title,class:"me-3",style:{width:"100px",height:"100px","object-fit":"cover"}},null,8,F),s("div",H,[s("div",q,[s("p",z,o(e.product.title),1),s("p",K," x "+o(e.qty)+" "+o(e.product.unit),1),s("p",G," NT$"+o(c.$filters.currency(e.final_total)),1)])])])]))),128)),s("div",J,[Q,s("p",W," $NT "+o(c.$filters.currency(t.order.total)),1)]),s("table",X,[s("tbody",null,[s("tr",Y,[Z,s("td",ss,o(t.order.user.email),1)]),s("tr",ts,[es,s("td",os,o(t.order.user.name),1)]),s("tr",rs,[ds,s("td",cs,o(t.order.user.tel),1)]),s("tr",is,[as,s("td",ns,o(t.order.user.address),1)]),s("tr",ls,[_s,s("td",hs,[t.order.is_paid?(r(),d("span",ms,"付款完成")):(r(),d("span",ps,"尚未付款"))])])])]),t.order.is_paid===!1?(r(),d("div",us,ys)):v("",!0)],32)])])])])}const Ls=f(I,[["render",bs]]);export{Ls as default};
