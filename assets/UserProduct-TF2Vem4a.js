import{_ as S,m as P,r as d,o as r,c as n,a as l,b as t,e as _,t as i,h as u,f as a,w as h,F as f,i as C,g as V}from"./index-BSBb-qkF.js";import{S as g}from"./sweetalert2.all-CRK_X6FK.js";import{S as B,a as N,A as E,P as I,N as R}from"./navigation-DJJn899E.js";import{c as U}from"./cartStore-B9Ghn__G.js";var A={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"hedy-api-path",BASE_URL:"/Eco-Coffee/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:b,VITE_PATH:w}=A,O={data(){return{isLoading:!1,product:{},products:[],id:"",trackList:[]}},methods:{...P(U,["addToCart"]),getProducts(){const e=`${b}/api/${w}/products/all`;this.isLoading=!0,this.axios.get(e).then(o=>{this.products=o.data.products,this.isLoading=!1}).catch(o=>{this.isLoading=!1,this.pushMessage({style:"danger",title:"取得產品資訊失敗",content:o.response.data.message})})},getProduct(){const e=`${b}/api/${w}/product/${this.id}`;this.isLoading=!0,this.axios.get(e).then(o=>{this.product=o.data.product,this.isLoading=!1}).catch(()=>{this.isLoading=!1})},getTrack(){const e=localStorage.getItem("homeTrack");e&&(this.trackList=JSON.parse(e))},setTrack(e){if(this.trackList.includes(e)){const o=this.trackList.findIndex(p=>p===e);this.trackList.splice(o,1),g.fire({icon:"success",title:"己移除收藏清單",showConfirmButton:!1,timer:1500})}else g.fire({icon:"success",title:"己加入收藏清單",showConfirmButton:!1,timer:1500}),this.trackList.push(e);localStorage.setItem("homeTrack",JSON.stringify(this.trackList)),this.getTrack()}},components:{Swiper:B,SwiperSlide:N},setup(){return{modules:[E,I,R]}},created(){this.id=this.$route.params.productId,this.getProducts(),this.getProduct(),this.getTrack()}},j={class:"container"},D={"aria-label":"breadcrumb"},M={class:"breadcrumb mt-3"},F={class:"breadcrumb-item"},H={class:"breadcrumb-item"},J={class:"breadcrumb-item active fw-bold","aria-current":"page"},z={class:"row justify-content-center"},q={class:"col-md-6 align-items-center"},G=["src","alt"],K={class:"col-md-5"},Q={class:"fw-bold mb-3"},W={class:"badge bg-primary mb-2"},X={class:"row d-flex flex-column"},Y={class:"col"},Z={class:"fs-6"},$={class:"col"},tt=t("p",{class:"fs-5 text-dark mt-2 mb-1"},"【 規格 】",-1),st={class:"text-muted"},et={key:0,class:"h5"},ot={key:1,class:"h6"},it={key:2,class:"h4 text-primary fw-bold"},ct={class:"ms-3"},rt=t("hr",null,null,-1),nt={class:"row my-4"},at={class:"col-6"},dt={key:0},lt=t("i",{class:"bi bi-heart-fill text-white"},null,-1),_t=[lt],ut={key:1},ht=t("i",{class:"bi bi-heart text-white"},null,-1),pt=[ht],mt={class:"col-6"},ft=t("i",{class:"bi bi-cart-check"},null,-1),gt={class:"container mt-6"},bt=t("hr",null,null,-1),wt=t("h2",{class:"text-center fw-bold my-5"},"熱銷商品",-1),kt={class:"d-flex justify-content-center my-4"},vt={class:"row"},yt={class:"col-md-4 col-sm"},Lt={class:"card swiper-card mb-sm-4 ms-md-4 m-sm-auto"},xt=["src"],Tt={class:"card-body"},St={class:"badge rounded-pill bg-primary mb-2"},Pt={class:"card-title fs-6 fw-bold"},Ct={class:"card-text"},Vt=["onClick"],Bt=t("i",{class:"bi bi-cart-check me-2"},null,-1);function Nt(e,o,p,k,s,v){const y=d("LoadingOverLay"),m=d("RouterLink"),L=d("router-link"),x=d("swiper-slide"),T=d("swiper");return r(),n(f,null,[l(y,{active:s.isLoading,"z-index":1060},null,8,["active"]),t("section",j,[t("nav",D,[t("ol",M,[t("li",F,[l(m,{to:"/home"},{default:_(()=>[a("首頁")]),_:1})]),t("li",H,[l(m,{to:"/products"},{default:_(()=>[a("全部商品")]),_:1})]),t("li",J,i(s.product.title),1)])]),t("div",z,[t("div",q,[t("img",{src:s.product.imageUrl,class:"img-fluid mb-3 object-fit-cover",width:"525",alt:s.product.title},null,8,G)]),t("article",K,[t("h2",Q,i(s.product.title),1),t("h5",null,[t("span",W,i(s.product.category),1)]),t("div",X,[t("div",Y,[t("p",Z,i(s.product.description),1)]),t("div",$,[tt,t("p",st,i(s.product.content),1)])]),s.product.price?u("",!0):(r(),n("div",et,i(s.product.origin_price)+" 元",1)),s.product.price?(r(),n("del",ot,"原價 "+i(s.product.origin_price)+" 元",1)):u("",!0),s.product.price?(r(),n("div",it,[a(" 現在只要 NT$ "+i(s.product.price)+" 元",1),t("span",ct,"/ "+i(s.product.unit),1)])):u("",!0),rt,t("div",nt,[t("div",at,[t("button",{class:"btn btn-danger w-100",type:"button",onClick:o[0]||(o[0]=h(c=>v.setTrack(s.product.id),["prevent"]))},[s.trackList.includes(s.product.id)?(r(),n("span",dt,_t)):(r(),n("span",ut,pt)),a(" 加入收藏 ")])]),t("div",mt,[t("button",{class:"btn btn-primary w-100",type:"button",onClick:o[1]||(o[1]=h(c=>e.addToCart(s.product.id),["prevent"]))},[ft,a(" 加入購物車 ")])])])])])]),t("section",gt,[bt,wt,t("div",kt,[l(T,{autoplay:!0,slidesPerView:1,spaceBetween:10,breakpoints:{375:{slidesPerView:1,spaceBetween:10},768:{slidesPerView:3,spaceBetween:30},1024:{slidesPerView:4,spaceBetween:30}},modules:k.modules,class:"mySwiper"},{default:_(()=>[(r(!0),n(f,null,C(s.products,c=>(r(),V(x,{key:c.id},{default:_(()=>[t("div",vt,[t("div",yt,[t("div",Lt,[l(L,{to:`/product/${c.id}`,class:"swiper-card-link"},{default:_(()=>[t("img",{src:c.imageUrl,class:"swiper-card-img"},null,8,xt)]),_:2},1032,["to"]),t("div",Tt,[t("span",St,i(c.category),1),t("h5",Pt,i(c.title),1),t("p",Ct,"NT$ "+i(c.price),1),t("a",{class:"btn btn-primary d-flex justify-content-center text-white",onClick:h(Et=>e.addToCart(c.id),["prevent"])},[Bt,a("加入購物車")],8,Vt)])])])])]),_:2},1024))),128))]),_:1},8,["modules"])])])],64)}const Ot=S(O,[["render",Nt]]);export{Ot as default};
