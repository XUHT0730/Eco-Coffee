import{_ as E,p as j,m as b,r as n,o as c,c as d,b as e,a as l,e as f,F as v,i as C,h,t as i,s as U,f as y,n as _,d as I,v as S}from"./index-C4-XBDg3.js";import{c as g}from"./cartStore-BqoHRzqT.js";import{t as F}from"./toastMessage-BYbxFgTw.js";import"./sweetalert2.all-DcPyzkLa.js";var T={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"hedy-api-path",BASE_URL:"/Eco-Coffee/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:M,VITE_PATH:R}=T,O={data(){return{carts:{},orderId:"",products:[],product:{},status:{loadingItem:""},form:{user:{name:"",email:"",tel:"",address:""},message:""},isLoading:!1}},computed:{...j(g,["cart"])},methods:{...b(F,["pushMessage"]),...b(g,["getCart"]),getProduct(s){this.$router.push(`product/${s}`)},createOrder(){this.isLoading=!0;const s=`${M}/api/${R}/order`,t=this.form;this.axios.post(s,{data:t}).then(m=>{this.$router.push(`/checkout/${m.data.orderId}`),this.$refs.form.resetForm(),this.isLoading=!1}).catch(m=>{this.isLoading=!1,this.pushMessage({style:"danger",title:"建立訂單",content:m.response.data.message})})}},created(){this.orderId=this.$route.params.orderId,this.getCart()}},P={class:"container"},q={class:"row justify-content-center"},A={class:"col-md-10"},D={class:"navbar navbar-expand-lg navbar-light px-0"},N=e("i",{class:"bi bi-cup-hot ff-minor text-primary"},null,-1),B=e("span",{class:"ms-2 fw-bold ff-minor"},"Eco-Coffee",-1),$=U('<ul class="list-unstyled mb-0 ms-md-auto d-flex align-items-center justify-content-between justify-content-md-end w-100 mt-md-0 mt-4"><li class="me-md-6 me-3 position-relative custom-step-line text-primary fw-bold"><i class="bi bi-check2-circle d-md-inline d-block text-center"></i><span class="text-nowrap">購物車</span></li><li class="me-md-6 me-3 position-relative custom-step-line text-primary fw-bold"><i class="bi bi-check2-circle d-md-inline d-block text-center"></i><span class="text-nowrap">訂購資料填寫</span></li><li><i class="bi bi-exclamation-circle d-md-inline d-block text-center"></i><span class="text-nowrap">訂單完成</span></li></ul>',1),z={class:"container"},H=e("div",{class:"row justify-content-center"},[e("div",{class:"col-md-10"},[e("h3",{class:"fw-bold mb-4 pt-3 text-primary"},"訂購資料填寫")])],-1),G={class:"row flex-row-reverse justify-content-center pb-5"},J={class:"col-md-5"},K={class:"border p-4 mb-4 border-dark"},Q=e("p",{class:"h4 text-primary fw-bold"},"訂單明細",-1),W={class:"d-flex py-3 align-items-center"},X=["src","alt"],Y={class:"flex-grow-1"},Z={class:"d-md-flex justify-content-md-between align-items-md-center"},ee={class:"mb-0 fw-bold"},se={class:"mb-0"},te={class:"mb-0"},oe={key:0,class:"text-primary"},le={class:"table mt-4 border-top border-bottom text-muted border-dark"},ae=e("th",{scope:"row",class:"border-0 px-0 pt-4 font-weight-normal"}," 小計 ",-1),re={class:"text-end border-0 px-0 pt-4"},ie=e("tr",null,[e("th",{scope:"row",class:"border-0 px-0 pt-0 pb-4 font-weight-normal"}," Payment "),e("td",{class:"text-end border-0 px-0 pt-0 pb-4"},"ApplePay")],-1),ne={class:"d-flex justify-content-between mt-4"},ce=e("p",{class:"mb-0 h4 fw-bold"},"總計",-1),de={class:"mb-0 h4 fw-bold"},me={key:1,class:"d-flex justify-content-between mt-4"},pe=e("p",{class:"mb-0 h4 fw-bold text-primary"},"折扣價",-1),ue={class:"mb-0 h4 fw-bold text-primary"},_e={class:"col-md-5"},fe=e("p",null,"Contact information",-1),he={class:"mb-3"},be=e("label",{for:"email",class:"form-label"},"* Email",-1),ve={class:"mb-3"},ye=e("label",{for:"name",class:"form-label"},"* 收件人姓名",-1),ge={class:"mb-3"},xe=e("label",{for:"tel",class:"form-label"},"* 收件人電話",-1),we={class:"mb-3"},Ve=e("label",{for:"address",class:"form-label"},"* 收件人地址",-1),ke={class:"mb-3"},Le=e("label",{for:"message",class:"form-label"},"留言",-1),Ee={class:"d-flex flex-column-reverse flex-md-row mt-4 justify-content-between align-items-md-center align-items-end w-100"},je=e("i",{class:"bi bi-chevron-double-left mr-1"},null,-1),Ce=e("button",{type:"submit",class:"btn btn-primary py-3 px-6"}," 送出訂單 ",-1);function Ue(s,t,m,Ie,a,x){const w=n("LoadingOverLay"),V=n("RouterLink"),p=n("VeeField"),u=n("ErrorMessage"),k=n("router-link"),L=n("VeeForm");return c(),d(v,null,[e("div",P,[l(w,{active:a.isLoading,"z-index":1060},null,8,["active"]),e("div",q,[e("div",A,[e("nav",D,[l(V,{to:"/",class:"fs-4 navbar-brand"},{default:f(()=>[N,B]),_:1}),$])])])]),e("div",z,[H,e("div",G,[e("div",J,[e("div",K,[Q,s.cart.carts?(c(!0),d(v,{key:0},C(s.cart.carts,o=>(c(),d("div",{key:o.id},[e("div",W,[e("img",{src:o.product.imageUrl,alt:o.product.title,class:"me-2",style:{width:"60px",height:"60px","object-fit":"cover"}},null,8,X),e("div",Y,[e("div",Z,[e("p",ee,i(o.product.title),1),e("p",se," x "+i(o.qty)+" "+i(o.product.unit),1),e("p",te,[s.cart.final_total!==s.cart.total?(c(),d("small",oe,"折扣價")):h("",!0),y(" "+i(s.$filters.currency(o.final_total)),1)])])])])]))),128)):h("",!0),e("table",le,[e("tbody",null,[e("tr",null,[ae,e("td",re,i(s.$filters.currency(s.cart.total)),1)]),ie])]),e("div",ne,[ce,e("p",de,i(s.$filters.currency(s.cart.total)),1)]),s.cart.final_total!==s.cart.total?(c(),d("div",me,[pe,e("p",ue,i(s.$filters.currency(s.cart.final_total)),1)])):h("",!0)])]),e("div",_e,[l(L,{ref:"form",onSubmit:x.createOrder},{default:f(({errors:o})=>[fe,e("div",he,[be,l(p,{id:"email",name:"email",type:"email",class:_(["form-control",{"is-invalid":o.email}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:a.form.user.email,"onUpdate:modelValue":t[0]||(t[0]=r=>a.form.user.email=r)},null,8,["class","modelValue"]),l(u,{name:"email",class:"invalid-feedback"})]),e("div",ve,[ye,l(p,{id:"name",name:"姓名",type:"text",class:_(["form-control",{"is-invalid":o.姓名}]),placeholder:"請輸入姓名",rules:"required",modelValue:a.form.user.name,"onUpdate:modelValue":t[1]||(t[1]=r=>a.form.user.name=r)},null,8,["class","modelValue"]),l(u,{name:"姓名",class:"invalid-feedback"})]),e("div",ge,[xe,l(p,{id:"tel",name:"電話",type:"tel",class:_(["form-control",{"is-invalid":o.電話}]),placeholder:"請輸入電話",rules:"required|min:8|max:10",modelValue:a.form.user.tel,"onUpdate:modelValue":t[2]||(t[2]=r=>a.form.user.tel=r)},null,8,["class","modelValue"]),l(u,{name:"電話",class:"invalid-feedback"})]),e("div",we,[Ve,l(p,{id:"address",name:"地址",type:"text",class:_(["form-control",{"is-invalid":o.地址}]),placeholder:"請輸入地址",rules:"required",modelValue:a.form.user.address,"onUpdate:modelValue":t[3]||(t[3]=r=>a.form.user.address=r)},null,8,["class","modelValue"]),l(u,{name:"地址",class:"invalid-feedback"})]),e("div",ke,[Le,I(e("textarea",{name:"",id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":t[4]||(t[4]=r=>a.form.message=r)},null,512),[[S,a.form.message]])]),e("div",Ee,[l(k,{to:"/cart",class:"mt-5"},{default:f(()=>[je,y(" 回到購物車")]),_:1}),Ce])]),_:1},8,["onSubmit"])])])])],64)}const Re=E(O,[["render",Ue]]);export{Re as default};
