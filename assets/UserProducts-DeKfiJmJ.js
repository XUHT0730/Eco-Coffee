import{_ as C,m as v,r as g,o as i,c,b as t,d as P,v as T,n as y,a as n,e as _,F as m,i as k,f as u,t as r,h as f,w as E}from"./index-6rp3XoH_.js";import{S as b}from"./sweetalert2.all-ltd6ySQL.js";import{c as S}from"./cartStore-BIMpQI-w.js";import{t as V}from"./toastMessage-B_5MRa3P.js";import{P as I}from"./PaginationComponent-FosTha1t.js";var O={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"hedy-api-path",BASE_URL:"/Eco-Coffee/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:$,VITE_PATH:M}=O,N={data(){return{status:{loadingItem:""},isLoading:!1,fullPage:!1,products:[],categories:["赫根山 Mount Hagen","生態綠 OKOGREEN","畢嘉士","微笑人咖啡 Laughing Man Coffee"],product:{},search:"",cart:{},trackList:[],pagination:{}}},methods:{...v(V,["pushMessage"]),...v(S,["addToCart"]),getProducts(e=1){const{category:a=""}=this.$route.query,l=`${$}/api/${M}/products?category=${a}&page=${e}`;this.isLoading=!0,this.axios.get(l).then(p=>{const{pagination:o}=p.data;this.pagination=o,this.products=p.data.products,this.isLoading=!1,this.products=this.products.filter(d=>d.title.trim().toLowerCase().includes(this.search.toLowerCase()))}).catch(()=>{this.isLoading=!1})},getProduct(e){this.$router.push(`product/${e}`)},getTrack(){const e=localStorage.getItem("homeTrack");e&&(this.trackList=JSON.parse(e))},setTrack(e){if(this.trackList.includes(e)){const a=this.trackList.findIndex(l=>l===e);this.trackList.splice(a,1),b.fire({icon:"success",title:"己移除收藏清單",showConfirmButton:!1,timer:1500})}else b.fire({icon:"success",title:"己加入收藏清單",showConfirmButton:!1,timer:1500}),this.trackList.push(e);localStorage.setItem("homeTrack",JSON.stringify(this.trackList)),this.getTrack()}},components:{PaginationComponent:I},watch:{search(e){this.getProducts(1,e)},"$route.query":{handler(){this.getProducts()},deep:!0}},created(){this.getProducts(),this.getTrack()}},U={class:"bg-light py-4"},B={class:"container"},R={class:"row d-flex justify-content-end"},D={class:"col-md-3"},q={class:"input-group w-100 mt-md-0 mt-3"},A=t("div",{class:"input-group-append"},[t("button",{class:"btn btn-primary py-2",type:"button",id:"search"},[t("i",{class:"bi bi-search"})])],-1),j={class:"container ec-container"},H={class:"row mt-5 mt-md-5 mt-3"},F={class:"col-lg-2 col-md-3 mb-5"},J={class:"list-group"},z={class:"col-lg-10 col-lg-10 col-md-9 mb-5"},G={class:"vl-parent"},K={class:"row row-cols-3 g-4"},Q={key:0,class:"col"},W=t("p",null,"查無此商品",-1),X=[W],Y={class:"card product-card shadow bg-white mb-sm-4 ms-md-4 m-sm-auto"},Z=["src"],tt={class:"card-body position-relative"},st={class:"row d-flex"},et={class:"col"},ot={class:"left w-100"},it={class:"bg-secondary position-absolute fs-6 px-2 py-1 text-white category"},ct={class:"col-3"},at={class:"right w-100 text-end"},nt=["onClick"],rt={key:0},lt=t("i",{class:"bi bi-heart-fill fs-4 text-danger"},null,-1),dt=[lt],ht={key:1},_t=t("i",{class:"bi bi-heart fs-4 text-danger"},null,-1),ut=[_t],pt={class:"card-title pt-2 fw-bold"},gt={key:0,class:"h5"},mt={key:1,class:"h6 text-dark"},ft={key:2,class:"h5 fw-bold"},vt=["onClick"],yt=t("i",{class:"bi bi-cart-check"},null,-1);function kt(e,a,l,p,o,d){const h=g("router-link"),L=g("LoadingOverLay"),w=g("PaginationComponent");return i(),c(m,null,[t("section",U,[t("div",B,[t("div",R,[t("div",D,[t("div",q,[P(t("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=s=>o.search=s),class:"form-control border-primary py-2",placeholder:"快速搜尋 ex : 低咖啡因、濾掛"},null,512),[[T,o.search,void 0,{trim:!0}]]),A])])])])]),t("section",j,[t("div",H,[t("div",F,[t("ul",J,[t("li",{class:y([{active:!e.$route.query.category},"list-group-item"])},[n(h,{class:"py-2 d-block text-muted",to:"/products"},{default:_(()=>[u("全部商品")]),_:1})],2),(i(!0),c(m,null,k(o.categories,s=>(i(),c("li",{key:s,class:y(["list-group-item",{active:e.$route.query.category===s}])},[n(h,{class:"py-2 d-block text-muted",to:`/products?category=${s}`},{default:_(()=>[u(r(s),1)]),_:2},1032,["to"])],2))),128))])]),t("div",z,[t("div",G,[n(L,{active:o.isLoading,"is-full-page":o.fullPage},null,8,["active","is-full-page"]),t("div",K,[o.products.length===0?(i(),c("div",Q,X)):(i(!0),c(m,{key:1},k(o.products,s=>(i(),c("div",{class:"col-12 col-xl-4 col-lg-5 d-flex justify-content-center",key:s.id},[t("div",Y,[n(h,{to:`/product/${s.id}`,class:"product-card-link"},{default:_(()=>[t("img",{src:s.imageUrl,class:"product-card-img"},null,8,Z)]),_:2},1032,["to"]),t("div",tt,[t("div",st,[t("div",et,[t("div",ot,[t("div",it,r(s.category),1)])]),t("div",ct,[t("div",at,[t("div",{onClick:x=>d.setTrack(s.id)},[o.trackList.includes(s.id)?(i(),c("span",rt,dt)):(i(),c("span",ht,ut))],8,nt)])])]),t("h5",pt,[n(h,{to:`/product/${s.id}`},{default:_(()=>[u(r(s.title),1)]),_:2},1032,["to"])]),t("td",null,[s.price?f("",!0):(i(),c("div",gt,r(e.item.origin_price)+" 元 ",1)),s.price?(i(),c("del",mt," 原價 "+r(s.origin_price)+" 元",1)):f("",!0),s.price?(i(),c("div",ft," 現在只要 "+r(s.price)+" 元 ",1)):f("",!0)]),t("button",{class:"btn btn-primary w-100",type:"button",onClick:E(x=>e.addToCart(s.id),["prevent"])},[yt,u(" 加入購物車")],8,vt)])])]))),128))])])]),n(w,{class:"d-flex justify-content-center",pagination:o.pagination,onEmitPages:d.getProducts},null,8,["pagination","onEmitPages"])])])],64)}const Pt=C(N,[["render",kt]]);export{Pt as default};
