import{_ as x,m as y,r as p,o,c as i,a as l,b as t,d as P,v as T,n as v,e as g,F as m,j as k,f as u,t as n,h as f,w as E}from"./index-CLvFDI08.js";import{S as b}from"./sweetalert2.all-Dj6YF7JE.js";import{c as S}from"./cartStore-D8pRg0QS.js";import{t as V}from"./toastMessage-u-y4ImSm.js";import{P as I}from"./PaginationComponent-B97ef8qy.js";var O={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"hedy-api-path",BASE_URL:"/Eco-Coffee/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:$,VITE_PATH:M}=O,N={data(){return{status:{loadingItem:""},isLoading:!1,products:[],categories:["赫根山 Mount Hagen","生態綠 OKOGREEN","畢嘉士","微笑人咖啡 Laughing Man Coffee"],product:{},search:"",cart:{},trackList:[],pagination:{}}},methods:{...y(V,["pushMessage"]),...y(S,["addToCart"]),getProducts(e=1){const{category:c=""}=this.$route.query,d=`${$}/api/${M}/products?category=${c}&page=${e}`;this.isLoading=!0,this.axios.get(d).then(r=>{const{pagination:a}=r.data;this.pagination=a,this.products=r.data.products,this.isLoading=!1,this.products=this.products.filter(h=>h.title.trim().toLowerCase().includes(this.search.toLowerCase()))}).catch(r=>{this.isLoading=!1,console.log(r)})},getProduct(e){this.$router.push(`product/${e}`)},getTrack(){const e=localStorage.getItem("homeTrack");e&&(this.trackList=JSON.parse(e))},setTrack(e){if(this.trackList.includes(e)){const c=this.trackList.findIndex(d=>d===e);this.trackList.splice(c,1),b.fire({icon:"success",title:"己移除收藏清單",showConfirmButton:!1,timer:1500})}else b.fire({icon:"success",title:"己加入收藏清單",showConfirmButton:!1,timer:1500}),this.trackList.push(e);localStorage.setItem("homeTrack",JSON.stringify(this.trackList)),this.getTrack()}},components:{PaginationComponent:I},watch:{search(e){this.getProducts(1,e)},"$route.query":{handler(){this.getProducts()},deep:!0}},created(){this.getProducts(),this.getTrack()}},U={class:"container"},B={class:"bg-light py-4"},R={class:"container"},D={class:"row d-flex justify-content-end"},j={class:"col-md-3"},q={class:"input-group w-md-50 mt-md-0 mt-3"},A=t("div",{class:"input-group-append"},[t("button",{class:"btn btn-primary rounded-0",type:"button",id:"search"},[t("i",{class:"bi bi-search"})])],-1),H={class:"row mt-5 mt-md-5 mt-3 mb-7"},z={class:"col-lg-2 col-md-3 mb-2"},F={class:"list-group"},J={class:"row row-cols-3 my-4 g-4 col-lg-10 col-md-9"},G={key:0,class:"col"},K=t("p",null,"查無此商品",-1),Q=[K],W={class:"card shadow bg-white"},X=["src"],Y={class:"card-body position-relative"},Z={class:"bg-secondary fs-6 px-3 py-1 text-white position-absolute category"},tt={class:"card-title pt-5 px-1"},st=["onClick"],et={key:0},ot=t("i",{class:"bi bi-heart-fill fs-4 text-danger"},null,-1),it=[ot],at={key:1},ct=t("i",{class:"bi bi-heart fs-4 text-danger"},null,-1),nt=[ct],rt={key:0,class:"h5"},lt={key:1,class:"h6"},dt={key:2,class:"h5"},ht=["onClick"],ut=t("i",{class:"bi bi-cart-check"},null,-1);function _t(e,c,d,r,a,h){const L=p("LoadingOverLay"),_=p("router-link"),w=p("PaginationComponent");return o(),i(m,null,[l(L,{active:a.isLoading,"z-index":1060},null,8,["active"]),t("div",U,[t("div",B,[t("div",R,[t("div",D,[t("div",j,[t("div",q,[P(t("input",{type:"text","onUpdate:modelValue":c[0]||(c[0]=s=>a.search=s),class:"form-control rounded-0 border-primary",placeholder:"快速搜尋 ex : 低咖啡因、濾掛"},null,512),[[T,a.search,void 0,{trim:!0}]]),A])])])])]),t("div",H,[t("div",z,[t("ul",F,[t("li",{class:v([{active:!e.$route.query.category},"list-group-item"])},[l(_,{class:"py-2 d-block text-muted",to:"/products"},{default:g(()=>[u("全部商品")]),_:1})],2),(o(!0),i(m,null,k(a.categories,s=>(o(),i("li",{key:s,class:v(["list-group-item",{active:e.$route.query.category===s}])},[l(_,{class:"py-2 d-block text-muted",to:`/products?category=${s}`},{default:g(()=>[u(n(s),1)]),_:2},1032,["to"])],2))),128))])]),t("div",J,[a.products.length===0?(o(),i("div",G,Q)):(o(!0),i(m,{key:1},k(a.products,s=>(o(),i("div",{class:"col",key:s.id},[t("div",W,[t("img",{class:"card-img-top object-fit-cover w-70",src:s.imageUrl,height:"325"},null,8,X),t("div",Y,[t("div",Z,n(s.category),1),t("h5",tt,[l(_,{to:`/product/${s.id}`},{default:g(()=>[u(n(s.title),1)]),_:2},1032,["to"])]),t("div",{class:"position-absolute",onClick:C=>h.setTrack(s.id)},[a.trackList.includes(s.id)?(o(),i("span",et,it)):(o(),i("span",at,nt))],8,st),t("td",null,[s.price?f("",!0):(o(),i("div",rt,n(e.item.origin_price)+" 元 ",1)),s.price?(o(),i("del",lt,"原價 "+n(s.origin_price)+" 元",1)):f("",!0),s.price?(o(),i("div",dt," 現在只要 "+n(s.price)+" 元 ",1)):f("",!0)]),t("button",{class:"btn btn-primary w-100",type:"button",onClick:E(C=>e.addToCart(s.id),["prevent"])},[ut,u(" 加入購物車")],8,ht)])])]))),128))]),l(w,{class:"d-flex justify-content-center",pagination:a.pagination,onEmitPages:h.getProducts},null,8,["pagination","onEmitPages"])])])],64)}const vt=x(N,[["render",_t]]);export{vt as default};
