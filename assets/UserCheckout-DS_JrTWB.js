import{_ as p,m as g,r as m,o as n,c as d,a as f,b as t,w as y,F as i,j as b,t as s,h as c}from"./index-CLvFDI08.js";import{t as L}from"./toastMessage-u-y4ImSm.js";var v={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"hedy-api-path",BASE_URL:"/Eco-Coffee/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:u,VITE_PATH:h}=v,x={data(){return{order:{user:{}},orderId:""}},methods:{...g(L,["pushMessage"]),getOrder(){const l=`${u}/api/${h}/order/${this.orderId}`;this.isLoading=!0,this.axios.get(l).then(o=>{this.order=o.data.order,this.isLoading=!1}).catch(o=>{this.isLoading=!1,this.pushMessage({style:"danger",title:"取得訂單失敗",content:o.response.data.message})})},payOrder(){const l=`${u}/api/${h}/pay/${this.orderId}`;this.isLoading=!0,this.axios.post(l).then(()=>{this.isLoading=!1,this.getOrder()}).catch(o=>{this.isLoading=!1,this.pushMessage({style:"danger",title:"付款失敗",content:o.response.data.message})})}},created(){this.orderId=this.$route.params.orderId,this.getOrder()}},E={class:"my-5 row justify-content-center"},O={class:"table align-middle"},I=t("thead",null,[t("th",null,"品名"),t("th",null,"數量"),t("th",null,"單價")],-1),k={class:"text-end"},V=t("td",{colspan:"2",class:"text-end"},"總計",-1),M={class:"text-end"},T={key:0,class:"text-end"},R=t("button",{type:"submit",class:"btn btn-danger"},"確認付款去",-1),S=[R],w={class:"table"},A=t("th",{width:"100"},"Email",-1),B=t("th",null,"姓名",-1),C=t("th",null,"收件人電話",-1),D=t("th",null,"收件人地址",-1),U=t("th",null,"付款狀態",-1),N={key:0},P={key:1,class:"text-success"},j={key:0,class:"text-end"},F=t("button",{type:"submit",class:"btn btn-danger"},"確認付款去",-1),H=[F];function q(l,o,z,G,e,a){const _=m("LoadingOverLay");return n(),d(i,null,[f(_,{active:l.isLoading,"z-index":1060},null,8,["active"]),t("div",E,[t("form",{class:"col-md-6",onSubmit:o[0]||(o[0]=y((...r)=>a.payOrder&&a.payOrder(...r),["prevent"]))},[t("table",O,[I,t("tbody",null,[(n(!0),d(i,null,b(e.order.products,r=>(n(),d("tr",{key:r.id},[t("td",null,s(r.product.title),1),t("td",null,s(r.qty)+"/"+s(r.product.unit),1),t("td",k,s(r.final_total),1)]))),128))]),t("tfoot",null,[t("tr",null,[V,t("td",M,s(e.order.total),1)])]),e.order.is_paid===!1?(n(),d("div",T,S)):c("",!0)]),t("table",w,[t("tbody",null,[t("tr",null,[A,t("td",null,s(e.order.user.email),1)]),t("tr",null,[B,t("td",null,s(e.order.user.name),1)]),t("tr",null,[C,t("td",null,s(e.order.user.tel),1)]),t("tr",null,[D,t("td",null,s(e.order.user.address),1)]),t("tr",null,[U,t("td",null,[e.order.is_paid?(n(),d("span",P,"付款完成")):(n(),d("span",N,"尚未付款"))])])])]),e.order.is_paid===!1?(n(),d("div",j,H)):c("",!0)],32)])],64)}const Q=p(x,[["render",q]]);export{Q as default};
