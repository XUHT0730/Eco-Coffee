import{_ as C,m as y,r as g,o,c as i,a as n,b as t,d as P,v as T,n as v,e as _,F as m,i as k,f as u,t as r,h as f,w as E}from"./index-BSBb-qkF.js";import{S as b}from"./sweetalert2.all-CRK_X6FK.js";import{c as S}from"./cartStore-B9Ghn__G.js";import{t as V}from"./toastMessage-DYpqK0s_.js";import{P as $}from"./PaginationComponent-B4z8cnpv.js";var I={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"hedy-api-path",BASE_URL:"/Eco-Coffee/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:O,VITE_PATH:M}=I,N={data(){return{status:{loadingItem:""},isLoading:!1,products:[],categories:["赫根山 Mount Hagen","生態綠 OKOGREEN","畢嘉士","微笑人咖啡 Laughing Man Coffee"],product:{},search:"",cart:{},trackList:[],pagination:{}}},methods:{...y(V,["pushMessage"]),...y(S,["addToCart"]),getProducts(e=1){const{category:a=""}=this.$route.query,l=`${O}/api/${M}/products?category=${a}&page=${e}`;this.isLoading=!0,this.axios.get(l).then(p=>{const{pagination:c}=p.data;this.pagination=c,this.products=p.data.products,this.isLoading=!1,this.products=this.products.filter(d=>d.title.trim().toLowerCase().includes(this.search.toLowerCase()))}).catch(()=>{this.isLoading=!1})},getProduct(e){this.$router.push(`product/${e}`)},getTrack(){const e=localStorage.getItem("homeTrack");e&&(this.trackList=JSON.parse(e))},setTrack(e){if(this.trackList.includes(e)){const a=this.trackList.findIndex(l=>l===e);this.trackList.splice(a,1),b.fire({icon:"success",title:"己移除收藏清單",showConfirmButton:!1,timer:1500})}else b.fire({icon:"success",title:"己加入收藏清單",showConfirmButton:!1,timer:1500}),this.trackList.push(e);localStorage.setItem("homeTrack",JSON.stringify(this.trackList)),this.getTrack()}},components:{PaginationComponent:$},watch:{search(e){this.getProducts(1,e)},"$route.query":{handler(){this.getProducts()},deep:!0}},created(){this.getProducts(),this.getTrack()}},U={class:"bg-light py-4"},B={class:"container"},R={class:"row d-flex justify-content-end"},D={class:"col-md-3"},q={class:"input-group w-100 mt-md-0 mt-3"},A=t("div",{class:"input-group-append"},[t("button",{class:"btn btn-primary py-2",type:"button",id:"search"},[t("i",{class:"bi bi-search"})])],-1),j={class:"container ec-container"},H={class:"row mt-5 mt-md-5 mt-3"},z={class:"col-lg-2 col-md-3 mb-5"},F={class:"list-group"},J={class:"col-lg-10 col-lg-10 col-md-9 mb-5"},G={class:"row row-cols-3 g-4"},K={key:0,class:"col"},Q=t("p",null,"查無此商品",-1),W=[Q],X={class:"card product-card shadow bg-white mb-sm-4 ms-md-4 m-sm-auto"},Y=["src"],Z={class:"card-body position-relative"},tt={class:"row d-flex"},st={class:"col"},et={class:"left w-100"},ot={class:"bg-secondary position-absolute fs-6 px-2 py-1 text-white category"},it={class:"col-3"},ct={class:"right w-100 text-end"},at=["onClick"],nt={key:0},rt=t("i",{class:"bi bi-heart-fill fs-4 text-danger"},null,-1),lt=[rt],dt={key:1},ht=t("i",{class:"bi bi-heart fs-4 text-danger"},null,-1),_t=[ht],ut={class:"card-title pt-2 fw-bold"},pt={key:0,class:"h5"},gt={key:1,class:"h6 text-dark"},mt={key:2,class:"h5 fw-bold"},ft=["onClick"],yt=t("i",{class:"bi bi-cart-check"},null,-1);function vt(e,a,l,p,c,d){const L=g("LoadingOverLay"),h=g("router-link"),w=g("PaginationComponent");return o(),i(m,null,[n(L,{active:c.isLoading,"z-index":1060},null,8,["active"]),t("section",U,[t("div",B,[t("div",R,[t("div",D,[t("div",q,[P(t("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=s=>c.search=s),class:"form-control border-primary py-2",placeholder:"快速搜尋 ex : 低咖啡因、濾掛"},null,512),[[T,c.search,void 0,{trim:!0}]]),A])])])])]),t("section",j,[t("div",H,[t("div",z,[t("ul",F,[t("li",{class:v([{active:!e.$route.query.category},"list-group-item"])},[n(h,{class:"py-2 d-block text-muted",to:"/products"},{default:_(()=>[u("全部商品")]),_:1})],2),(o(!0),i(m,null,k(c.categories,s=>(o(),i("li",{key:s,class:v(["list-group-item",{active:e.$route.query.category===s}])},[n(h,{class:"py-2 d-block text-muted",to:`/products?category=${s}`},{default:_(()=>[u(r(s),1)]),_:2},1032,["to"])],2))),128))])]),t("div",J,[t("div",G,[c.products.length===0?(o(),i("div",K,W)):(o(!0),i(m,{key:1},k(c.products,s=>(o(),i("div",{class:"col-12 col-xl-4 col-lg-5 d-flex justify-content-center",key:s.id},[t("div",X,[n(h,{to:`/product/${s.id}`,class:"product-card-link"},{default:_(()=>[t("img",{src:s.imageUrl,class:"product-card-img"},null,8,Y)]),_:2},1032,["to"]),t("div",Z,[t("div",tt,[t("div",st,[t("div",et,[t("div",ot,r(s.category),1)])]),t("div",it,[t("div",ct,[t("div",{onClick:x=>d.setTrack(s.id)},[c.trackList.includes(s.id)?(o(),i("span",nt,lt)):(o(),i("span",dt,_t))],8,at)])])]),t("h5",ut,[n(h,{to:`/product/${s.id}`},{default:_(()=>[u(r(s.title),1)]),_:2},1032,["to"])]),t("td",null,[s.price?f("",!0):(o(),i("div",pt,r(e.item.origin_price)+" 元 ",1)),s.price?(o(),i("del",gt," 原價 "+r(s.origin_price)+" 元",1)):f("",!0),s.price?(o(),i("div",mt," 現在只要 "+r(s.price)+" 元 ",1)):f("",!0)]),t("button",{class:"btn btn-primary w-100",type:"button",onClick:E(x=>e.addToCart(s.id),["prevent"])},[yt,u(" 加入購物車")],8,ft)])])]))),128))])]),n(w,{class:"d-flex justify-content-center",pagination:c.pagination,onEmitPages:d.getProducts},null,8,["pagination","onEmitPages"])])])],64)}const Ct=C(N,[["render",vt]]);export{Ct as default};
