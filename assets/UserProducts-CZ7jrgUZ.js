import{_ as P,m as y,r as _,o,c as i,a,b as t,d as T,v as E,n as v,e as u,F as m,j as k,f as p,t as r,h as f,w as S}from"./index-BPVuhT8G.js";import{S as b,c as V}from"./cartStore-BT11L4Al.js";import{F as $}from"./FooterLayout-DAXMv8Jd.js";import{t as I}from"./toastMessage-0W0Kb-J-.js";import{P as O}from"./PaginationComponent-DhuJKK70.js";var M={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"hedy-api-path",BASE_URL:"/Eco-Coffee/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:N,VITE_PATH:U}=M,B={data(){return{status:{loadingItem:""},isLoading:!1,products:[],categories:["赫根山 Mount Hagen","生態綠 OKOGREEN","畢嘉士","微笑人咖啡 Laughing Man Coffee"],product:{},search:"",cart:{},trackList:[],pagination:{}}},methods:{...y(I,["pushMessage"]),...y(V,["addToCart"]),getProducts(e=1){const{category:n=""}=this.$route.query,l=`${N}/api/${U}/products?category=${n}&page=${e}`;this.isLoading=!0,this.axios.get(l).then(g=>{const{pagination:c}=g.data;this.pagination=c,this.products=g.data.products,this.isLoading=!1,this.products=this.products.filter(d=>d.title.trim().toLowerCase().includes(this.search.toLowerCase()))}).catch(()=>{this.isLoading=!1})},getProduct(e){this.$router.push(`product/${e}`)},getTrack(){const e=localStorage.getItem("homeTrack");e&&(this.trackList=JSON.parse(e))},setTrack(e){if(this.trackList.includes(e)){const n=this.trackList.findIndex(l=>l===e);this.trackList.splice(n,1),b.fire({icon:"success",title:"己移除收藏清單",showConfirmButton:!1,timer:1500})}else b.fire({icon:"success",title:"己加入收藏清單",showConfirmButton:!1,timer:1500}),this.trackList.push(e);localStorage.setItem("homeTrack",JSON.stringify(this.trackList)),this.getTrack()}},components:{PaginationComponent:O,FooterLayout:$},watch:{search(e){this.getProducts(1,e)},"$route.query":{handler(){this.getProducts()},deep:!0}},created(){this.getProducts(),this.getTrack()}},F={class:"bg-light py-4"},R={class:"container"},D={class:"row d-flex justify-content-end"},j={class:"col-md-3"},q={class:"input-group w-md-50 mt-md-0 mt-3"},A=t("div",{class:"input-group-append"},[t("button",{class:"btn btn-primary py-2",type:"button",id:"search"},[t("i",{class:"bi bi-search"})])],-1),H={class:"container min-container"},z={class:"row mt-5 mt-md-5 mt-3"},J={class:"col-lg-2 col-md-3 mb-5"},G={class:"list-group"},K={class:"col-lg-10 col-lg-10 col-md-9 mb-5"},Q={class:"row row-cols-3 g-4"},W={key:0,class:"col"},X=t("p",null,"查無此商品",-1),Y=[X],Z={class:"card product-card shadow bg-white mb-sm-4 ms-md-4 m-sm-auto"},tt=["src"],st={class:"card-body position-relative"},et={class:"row d-flex"},ot={class:"col"},it={class:"left w-100"},ct={class:"bg-secondary position-absolute fs-6 px-2 py-1 text-white category"},at={class:"col-3"},nt={class:"right w-100 text-end"},rt=["onClick"],lt={key:0},dt=t("i",{class:"bi bi-heart-fill fs-4 text-danger"},null,-1),ht=[dt],_t={key:1},ut=t("i",{class:"bi bi-heart fs-4 text-danger"},null,-1),pt=[ut],gt={class:"card-title pt-2 fw-bold"},mt={key:0,class:"h5"},ft={key:1,class:"h6 text-dark"},yt={key:2,class:"h5 fw-bold"},vt=["onClick"],kt=t("i",{class:"bi bi-cart-check"},null,-1);function bt(e,n,l,g,c,d){const L=_("LoadingOverLay"),h=_("router-link"),w=_("PaginationComponent"),x=_("FooterLayout");return o(),i(m,null,[a(L,{active:c.isLoading,"z-index":1060},null,8,["active"]),t("section",F,[t("div",R,[t("div",D,[t("div",j,[t("div",q,[T(t("input",{type:"text","onUpdate:modelValue":n[0]||(n[0]=s=>c.search=s),class:"form-control border-primary py-2",placeholder:"快速搜尋 ex : 低咖啡因、濾掛"},null,512),[[E,c.search,void 0,{trim:!0}]]),A])])])])]),t("section",H,[t("div",z,[t("div",J,[t("ul",G,[t("li",{class:v([{active:!e.$route.query.category},"list-group-item"])},[a(h,{class:"py-2 d-block text-muted",to:"/products"},{default:u(()=>[p("全部商品")]),_:1})],2),(o(!0),i(m,null,k(c.categories,s=>(o(),i("li",{key:s,class:v(["list-group-item",{active:e.$route.query.category===s}])},[a(h,{class:"py-2 d-block text-muted",to:`/products?category=${s}`},{default:u(()=>[p(r(s),1)]),_:2},1032,["to"])],2))),128))])]),t("div",K,[t("div",Q,[c.products.length===0?(o(),i("div",W,Y)):(o(!0),i(m,{key:1},k(c.products,s=>(o(),i("div",{class:"col-12 col-xl-4 col-lg-5 d-flex justify-content-center",key:s.id},[t("div",Z,[a(h,{to:`/product/${s.id}`,class:"product-card-link"},{default:u(()=>[t("img",{src:s.imageUrl,class:"product-card-img"},null,8,tt)]),_:2},1032,["to"]),t("div",st,[t("div",et,[t("div",ot,[t("div",it,[t("div",ct,r(s.category),1)])]),t("div",at,[t("div",nt,[t("div",{onClick:C=>d.setTrack(s.id)},[c.trackList.includes(s.id)?(o(),i("span",lt,ht)):(o(),i("span",_t,pt))],8,rt)])])]),t("h5",gt,[a(h,{to:`/product/${s.id}`},{default:u(()=>[p(r(s.title),1)]),_:2},1032,["to"])]),t("td",null,[s.price?f("",!0):(o(),i("div",mt,r(e.item.origin_price)+" 元 ",1)),s.price?(o(),i("del",ft," 原價 "+r(s.origin_price)+" 元",1)):f("",!0),s.price?(o(),i("div",yt," 現在只要 "+r(s.price)+" 元 ",1)):f("",!0)]),t("button",{class:"btn btn-primary w-100",type:"button",onClick:S(C=>e.addToCart(s.id),["prevent"])},[kt,p(" 加入購物車")],8,vt)])])]))),128))])]),a(w,{class:"d-flex justify-content-center",pagination:c.pagination,onEmitPages:d.getProducts},null,8,["pagination","onEmitPages"])])]),a(x)],64)}const Tt=P(B,[["render",bt]]);export{Tt as default};
