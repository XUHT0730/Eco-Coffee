import{K as h,L as i}from"./index-D73JBGpL.js";import{S as r}from"./sweetalert2.all-DW_t8ktx.js";var p={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"hedy-api-path",BASE_URL:"/Eco-Coffee/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:c,VITE_PATH:d}=p,m=h("cartStore",{state:()=>({carts:[],cart:{},final_total:0,total:0}),actions:{getCart(){const a=`${c}/api/${d}/cart`;i.get(a).then(t=>{this.cart=t.data.data,this.carts=t.data.data.carts,this.final_total=t.data.data.final_total,this.total=t.data.data.total}).catch(()=>{})},addToCart(a,t=1){const e={product_id:a,qty:t},s=this.carts.findIndex(o=>o.product_id===a);if(s!==-1){const o=this.carts[s],l=o.qty+t,f={...o,qty:l};this.carts.splice(s,1,f),r.fire({icon:"info",title:"已更新購物車數量",showConfirmButton:!1,timer:1500})}else this.carts.push(e),r.fire({icon:"success",title:"成功加入購物車",showConfirmButton:!1,timer:1500});const n=`${c}/api/${d}/cart`;i.post(n,{data:e}).then(()=>{this.getCart()})}}});export{m as c};
