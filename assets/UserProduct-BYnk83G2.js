import{_ as P,m as C,r as a,o as r,c as n,a as d,b as t,e as _,t as i,h as u,f as l,w as h,F as f,j as V,g as B}from"./index-BPVuhT8G.js";import{S as g,c as N}from"./cartStore-BT11L4Al.js";import{S as E,a as I,A as R,P as U,N as A}from"./navigation-BlWSojfh.js";import{F}from"./FooterLayout-DAXMv8Jd.js";var O={VITE_URL:"https://vue3-course-api.hexschool.io/v2",VITE_PATH:"hedy-api-path",BASE_URL:"/Eco-Coffee/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_URL:b,VITE_PATH:w}=O,j={data(){return{isLoading:!1,product:{},products:[],id:"",trackList:[]}},methods:{...C(N,["addToCart"]),getProducts(){const o=`${b}/api/${w}/products/all`;this.isLoading=!0,this.axios.get(o).then(e=>{this.products=e.data.products,this.isLoading=!1}).catch(e=>{this.isLoading=!1,this.pushMessage({style:"danger",title:"取得產品資訊失敗",content:e.response.data.message})})},getProduct(){const o=`${b}/api/${w}/product/${this.id}`;this.isLoading=!0,this.axios.get(o).then(e=>{this.product=e.data.product,this.isLoading=!1}).catch(e=>{console.log(e),this.isLoading=!1})},getTrack(){const o=localStorage.getItem("homeTrack");o&&(this.trackList=JSON.parse(o))},setTrack(o){if(this.trackList.includes(o)){const e=this.trackList.findIndex(p=>p===o);this.trackList.splice(e,1),g.fire({icon:"success",title:"己移除收藏清單",showConfirmButton:!1,timer:1500})}else g.fire({icon:"success",title:"己加入收藏清單",showConfirmButton:!1,timer:1500}),this.trackList.push(o);localStorage.setItem("homeTrack",JSON.stringify(this.trackList)),this.getTrack()}},components:{FooterLayout:F,Swiper:E,SwiperSlide:I},setup(){return{modules:[R,U,A]}},created(){this.id=this.$route.params.productId,this.getProducts(),this.getProduct(),this.getTrack()}},D={class:"container"},M={"aria-label":"breadcrumb"},H={class:"breadcrumb mt-3"},J={class:"breadcrumb-item"},z={class:"breadcrumb-item"},q={class:"breadcrumb-item active fw-bold","aria-current":"page"},G={class:"row justify-content-center"},K={class:"col-md-6 align-items-center"},Q=["src","alt"],W={class:"col-md-5"},X={class:"fw-bold mb-3"},Y={class:"badge bg-primary mb-2"},Z={class:"row d-flex flex-column"},$={class:"col"},tt={class:"fs-6"},st={class:"col"},et=t("p",{class:"fs-5 text-dark mt-2 mb-1"},"【 規格 】",-1),ot={class:"text-muted"},it={key:0,class:"h5"},ct={key:1,class:"h6"},rt={key:2,class:"h4 text-primary fw-bold"},nt={class:"ms-3"},at=t("hr",null,null,-1),dt={class:"row my-4"},lt={class:"col-6"},_t={key:0},ut=t("i",{class:"bi bi-heart-fill text-white"},null,-1),ht=[ut],pt={key:1},mt=t("i",{class:"bi bi-heart text-white"},null,-1),ft=[mt],gt={class:"col-6"},bt=t("i",{class:"bi bi-cart-check"},null,-1),wt={class:"container mt-6"},kt=t("hr",null,null,-1),vt=t("h2",{class:"text-center fw-bold my-5"},"熱銷商品",-1),yt={class:"d-flex justify-content-center my-4"},Lt={class:"row"},xt={class:"col-md-4 col-sm"},Tt={class:"card swiper-card mb-sm-4 ms-md-4 m-sm-auto"},St=["src"],Pt={class:"card-body"},Ct={class:"badge rounded-pill bg-primary mb-2"},Vt={class:"card-title fs-6 fw-bold"},Bt={class:"card-text"},Nt=["onClick"],Et=t("i",{class:"bi bi-cart-check me-2"},null,-1);function It(o,e,p,k,s,v){const y=a("LoadingOverLay"),m=a("RouterLink"),L=a("router-link"),x=a("swiper-slide"),T=a("swiper"),S=a("FooterLayout");return r(),n(f,null,[d(y,{active:s.isLoading,"z-index":1060},null,8,["active"]),t("div",D,[t("nav",M,[t("ol",H,[t("li",J,[d(m,{to:"/home"},{default:_(()=>[l("首頁")]),_:1})]),t("li",z,[d(m,{to:"/products"},{default:_(()=>[l("全部商品")]),_:1})]),t("li",q,i(s.product.title),1)])]),t("div",G,[t("div",K,[t("img",{src:s.product.imageUrl,class:"img-fluid mb-3 object-fit-cover",width:"525",alt:s.product.title},null,8,Q)]),t("article",W,[t("h2",X,i(s.product.title),1),t("h5",null,[t("span",Y,i(s.product.category),1)]),t("div",Z,[t("div",$,[t("p",tt,i(s.product.description),1)]),t("div",st,[et,t("p",ot,i(s.product.content),1)])]),s.product.price?u("",!0):(r(),n("div",it,i(s.product.origin_price)+" 元",1)),s.product.price?(r(),n("del",ct,"原價 "+i(s.product.origin_price)+" 元",1)):u("",!0),s.product.price?(r(),n("div",rt,[l(" 現在只要 NT$ "+i(s.product.price)+" 元",1),t("span",nt,"/ "+i(s.product.unit),1)])):u("",!0),at,t("div",dt,[t("div",lt,[t("button",{class:"btn btn-danger w-100",type:"button",onClick:e[0]||(e[0]=h(c=>v.setTrack(s.product.id),["prevent"]))},[s.trackList.includes(s.product.id)?(r(),n("span",_t,ht)):(r(),n("span",pt,ft)),l(" 加入收藏 ")])]),t("div",gt,[t("button",{class:"btn btn-primary w-100",type:"button",onClick:e[1]||(e[1]=h(c=>o.addToCart(s.product.id),["prevent"]))},[bt,l(" 加入購物車 ")])])])])])]),t("section",wt,[kt,vt,t("div",yt,[d(T,{autoplay:!0,slidesPerView:1,spaceBetween:10,breakpoints:{375:{slidesPerView:1,spaceBetween:10},768:{slidesPerView:3,spaceBetween:30},1024:{slidesPerView:4,spaceBetween:30}},modules:k.modules,class:"mySwiper"},{default:_(()=>[(r(!0),n(f,null,V(s.products,c=>(r(),B(x,{key:c.id},{default:_(()=>[t("div",Lt,[t("div",xt,[t("div",Tt,[d(L,{to:`/product/${c.id}`,class:"swiper-card-link"},{default:_(()=>[t("img",{src:c.imageUrl,class:"swiper-card-img"},null,8,St)]),_:2},1032,["to"]),t("div",Pt,[t("span",Ct,i(c.category),1),t("h5",Vt,i(c.title),1),t("p",Bt,"NT$ "+i(c.price),1),t("a",{class:"btn btn-primary d-flex justify-content-center text-white",onClick:h(Rt=>o.addToCart(c.id),["prevent"])},[Et,l("加入購物車")],8,Nt)])])])])]),_:2},1024))),128))]),_:1},8,["modules"])])]),d(S)],64)}const jt=P(j,[["render",It]]);export{jt as default};
